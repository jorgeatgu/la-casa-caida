const ea=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};ea();const na=[{city:"huesca",linePopulationCSV:"data/huesca/huesca.csv",lineTotalCSV:"data/huesca/huesca-total.csv",scatterUnderCSV:"data/huesca/huesca-mayor-menor.csv",vegetativeCSV:"data/huesca/saldo-vegetativo-total-huesca.csv",comparatorCSV:"data/evolucion/huesca/huesca-total.csv",evolutionCSV:"data/huesca/huesca-2010-2020.csv",groupByAgeCSV:"data/data2020/huesca-years-groups-total.csv",densityCSV:"data/huesca/huesca-densidad.csv"},{city:"teruel",linePopulationCSV:"data/teruel/teruel.csv",lineTotalCSV:"data/teruel/teruel-total.csv",scatterUnderCSV:"data/teruel/teruel-mayor-menor.csv",vegetativeCSV:"data/teruel/saldo-vegetativo-total-teruel.csv",comparatorCSV:"data/evolucion/teruel/teruel-total.csv",evolutionCSV:"data/teruel/teruel-2010-2020.csv",groupByAgeCSV:"data/data2020/teruel-years-groups-total.csv",densityCSV:"data/teruel/teruel-densidad.csv"},{city:"zaragoza",linePopulationCSV:"data/zaragoza/zaragoza.csv",lineTotalCSV:"data/zaragoza/zaragoza-total.csv",scatterUnderCSV:"data/zaragoza/zaragoza-mayor-menor.csv",vegetativeCSV:"data/zaragoza/saldo-vegetativo-total-zaragoza.csv",comparatorCSV:"data/evolucion/zaragoza/zaragoza-total.csv",evolutionCSV:"data/zaragoza/zaragoza-2010-2020.csv",groupByAgeCSV:"data/data2020/zaragoza-years-groups-total.csv",densityCSV:"data/zaragoza/zaragoza-densidad.csv"}];var ra=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_i={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(ra,function(){function n(){return Math.random().toString(36).substring(2,10)}function r(C,c){function f(p,v){return v&&p&&p.classList&&p.classList.contains(v)||v&&p&&p.dataset&&p.dataset.id&&p.dataset.id===c?p:null}function g(p,v){return!p||p===document?null:f(p,v)?p:g(p.parentNode,v)}return f(C,c)||g(C,c)}function i(C,c=50,f=!1){let g;return function(...p){const v=self,x=()=>{g=null,f||C.apply(v,p)},w=f&&!g;clearTimeout(g),g=setTimeout(x,c),w&&C.apply(v,p)}}function s(C,c){return JSON.stringify(C)===JSON.stringify(c)}function a(C){const c=C.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,f=>"-"+f.toLowerCase());return C[0]===C[0].toUpperCase()?c.substring(1):c}class o{constructor(c){if(this.id=!c.id||c.id===""?n():c.id,this.label=c.label||"",this.selectAll=c.selectAll===void 0?!1:c.selectAll,this.selectAllText=c.selectAllText||"Select All",this.closable=c.closable||"off",this.options=[],c.options)for(const f of c.options)this.options.push(new l(f))}}class l{constructor(c){this.id=!c.id||c.id===""?n():c.id,this.value=c.value===void 0?c.text:c.value,this.text=c.text||"",this.html=c.html||"",this.selected=c.selected!==void 0?c.selected:!1,this.display=c.display!==void 0?c.display:!0,this.disabled=c.disabled!==void 0?c.disabled:!1,this.mandatory=c.mandatory!==void 0?c.mandatory:!1,this.placeholder=c.placeholder!==void 0?c.placeholder:!1,this.class=c.class||"",this.style=c.style||"",this.data=c.data||{}}}class h{constructor(c,f){this.selectType="single",this.data=[],this.selectType=c,this.setData(f)}validateDataArray(c){if(!Array.isArray(c))return new Error("Data must be an array");for(let f of c)if(f instanceof o||"label"in f){if(!("label"in f))return new Error("Optgroup must have a label");if("options"in f&&f.options)for(let g of f.options)return this.validateOption(g)}else return f instanceof l||"text"in f?this.validateOption(f):new Error("Data object must be a valid optgroup or option");return null}validateOption(c){return"text"in c?null:new Error("Option must have a text")}partialToFullData(c){let f=[];return c.forEach(g=>{if(g instanceof o||"label"in g){let p=[];"options"in g&&g.options&&g.options.forEach(v=>{p.push(new l(v))}),p.length>0&&f.push(new o(g))}(g instanceof l||"text"in g)&&f.push(new l(g))}),f}setData(c){this.data=this.partialToFullData(c),this.selectType==="single"&&this.setSelectedBy("value",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(c){this.setData(this.getData().concat(new l(c)))}setSelectedBy(c,f){let g=null,p=!1;for(let v of this.data){if(v instanceof o)for(let x of v.options)g||(g=x),x.selected=p?!1:f.includes(x[c]),x.selected&&this.selectType==="single"&&(p=!0);v instanceof l&&(g||(g=v),v.selected=p?!1:f.includes(v[c]),v.selected&&this.selectType==="single"&&(p=!0))}this.selectType==="single"&&g&&!p&&(g.selected=!0)}getSelected(){let c=this.getSelectedOptions(),f=[];return c.forEach(g=>{f.push(g.value)}),f}getSelectedOptions(){return this.filter(c=>c.selected,!1)}getSelectedIDs(){let c=this.getSelectedOptions(),f=[];return c.forEach(g=>{f.push(g.id)}),f}getOptgroupByID(c){for(let f of this.data)if(f instanceof o&&f.id===c)return f;return null}getOptionByID(c){let f=this.filter(g=>g.id===c,!1);return f.length?f[0]:null}getSelectType(){return this.selectType}getFirstOption(){let c=null;for(let f of this.data)if(f instanceof o?c=f.options[0]:f instanceof l&&(c=f),c)break;return c}search(c,f){return c=c.trim(),c===""?this.getData():this.filter(g=>f(g,c),!0)}filter(c,f){const g=[];return this.data.forEach(p=>{if(p instanceof o){let v=[];if(p.options.forEach(x=>{(!c||c(x))&&(f?v.push(new l(x)):g.push(new l(x)))}),v.length>0){let x=new o(p);x.options=v,g.push(x)}}p instanceof l&&(!c||c(p))&&g.push(new l(p))}),g}}class u{constructor(c,f,g){this.classes={main:"ss-main",placeholder:"ss-placeholder",values:"ss-values",single:"ss-single",max:"ss-max",value:"ss-value",valueText:"ss-value-text",valueDelete:"ss-value-delete",valueOut:"ss-value-out",deselect:"ss-deselect",deselectPath:"M10,10 L90,90 M10,90 L90,10",arrow:"ss-arrow",arrowClose:"M10,30 L50,70 L90,30",arrowOpen:"M10,70 L50,30 L90,70",content:"ss-content",openAbove:"ss-open-above",openBelow:"ss-open-below",search:"ss-search",searchHighlighter:"ss-search-highlight",searching:"ss-searching",addable:"ss-addable",addablePath:"M50,10 L50,90 M10,50 L90,50",list:"ss-list",optgroup:"ss-optgroup",optgroupLabel:"ss-optgroup-label",optgroupLabelText:"ss-optgroup-label-text",optgroupActions:"ss-optgroup-actions",optgroupSelectAll:"ss-selectall",optgroupSelectAllBox:"M60,10 L10,10 L10,90 L90,90 L90,50",optgroupSelectAllCheck:"M30,45 L50,70 L90,10",optgroupClosable:"ss-closable",option:"ss-option",optionDelete:"M10,10 L90,90 M10,90 L90,10",highlighted:"ss-highlighted",open:"ss-open",close:"ss-close",selected:"ss-selected",error:"ss-error",disabled:"ss-disabled",hide:"ss-hide"},this.store=f,this.settings=c,this.callbacks=g,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const c=this.store.getSelectedOptions();if(c.length){const f=c[c.length-1].id,g=this.content.list.querySelector('[data-id="'+f+'"]');g&&this.ensureElementInView(this.content.list,g)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const c of this.settings.class)c.trim()!==""&&(this.main.main.classList.add(c.trim()),this.content.main.classList.add(c.trim()));this.settings.contentPosition==="relative"&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var c;const f=document.createElement("div");f.dataset.id=this.settings.id,f.setAttribute("aria-label",this.settings.ariaLabel),f.tabIndex=0,f.onkeydown=S=>{switch(S.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),S.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const T=this.content.list.querySelector("."+this.classes.highlighted);return T&&T.click(),!1;case"Escape":return this.callbacks.close(),!1}return!1},f.onclick=S=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const g=document.createElement("div");g.classList.add(this.classes.values),f.appendChild(g);const p=document.createElement("div");p.classList.add(this.classes.deselect);const v=(c=this.store)===null||c===void 0?void 0:c.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&v&&v.length<=0?p.classList.add(this.classes.hide):p.classList.remove(this.classes.hide),p.onclick=S=>{if(S.stopPropagation(),this.settings.disabled)return;let T=!0;const k=this.store.getSelectedOptions(),M=[];if(this.callbacks.beforeChange&&(T=this.callbacks.beforeChange(M,k)===!0),T){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const D=this.store.getFirstOption(),N=D?D.value:"";this.callbacks.setSelected(N,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttribute("viewBox","0 0 100 100");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d",this.classes.deselectPath),x.appendChild(w),p.appendChild(x),f.appendChild(p);const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add(this.classes.arrow),y.setAttribute("viewBox","0 0 100 100");const b=document.createElementNS("http://www.w3.org/2000/svg","path");return b.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&y.classList.add(this.classes.hide),y.appendChild(b),f.appendChild(y),{main:f,values:g,deselect:{main:p,svg:x,path:w},arrow:{main:y,path:b}}}mainFocus(c){c!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const c=this.store.filter(p=>p.placeholder,!1);let f=this.settings.placeholderText;c.length&&(c[0].html!==""?f=c[0].html:c[0].text!==""&&(f=c[0].text));const g=document.createElement("div");return g.classList.add(this.classes.placeholder),g.innerHTML=f,g}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const c=this.store.filter(g=>g.selected&&!g.placeholder,!1),f=c.length>0?c[0]:null;if(!f)this.main.values.innerHTML=this.placeholder().outerHTML;else{const g=document.createElement("div");g.classList.add(this.classes.single),f.html?g.innerHTML=f.html:g.innerText=f.text,this.main.values.innerHTML=g.outerHTML}!this.settings.allowDeselect||!c.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let c=this.main.values.childNodes,f=this.store.filter(p=>p.selected&&p.display,!1);if(f.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const p=this.main.values.querySelector("."+this.classes.placeholder);p&&p.remove()}if(f.length>this.settings.maxValuesShown){const p=document.createElement("div");p.classList.add(this.classes.max),p.textContent=this.settings.maxValuesMessage.replace("{number}",f.length.toString()),this.main.values.innerHTML=p.outerHTML;return}else{const p=this.main.values.querySelector("."+this.classes.max);p&&p.remove()}let g=[];for(let p=0;p<c.length;p++){const v=c[p],x=v.getAttribute("data-id");x&&(f.filter(y=>y.id===x,!1).length||g.push(v))}for(const p of g)p.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(p)&&this.main.values.removeChild(p)},100);c=this.main.values.childNodes;for(let p=0;p<f.length;p++){let v=!0;for(let x=0;x<c.length;x++)f[p].id===String(c[x].dataset.id)&&(v=!1);v&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(f[p])):c.length===0?this.main.values.appendChild(this.multipleValue(f[p])):p===0?this.main.values.insertBefore(this.multipleValue(f[p]),c[p]):c[p-1].insertAdjacentElement("afterend",this.multipleValue(f[p])))}}multipleValue(c){const f=document.createElement("div");f.classList.add(this.classes.value),f.dataset.id=c.id;const g=document.createElement("div");if(g.classList.add(this.classes.valueText),g.innerText=c.text,f.appendChild(g),!c.mandatory){const p=document.createElement("div");p.classList.add(this.classes.valueDelete),p.onclick=w=>{if(w.preventDefault(),w.stopPropagation(),this.settings.disabled)return;let y=!0;const b=this.store.getSelectedOptions(),S=b.filter(T=>T.selected&&T.id!==c.id,!0);if(!(this.settings.minSelected&&S.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(y=this.callbacks.beforeChange(S,b)===!0),y)){let T=[];for(const k of S){if(k instanceof o)for(const M of k.options)T.push(M.value);k instanceof l&&T.push(k.value)}this.callbacks.setSelected(T,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(S),this.updateDeselectAll()}};const v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.setAttribute("viewBox","0 0 100 100");const x=document.createElementNS("http://www.w3.org/2000/svg","path");x.setAttribute("d",this.classes.optionDelete),v.appendChild(x),p.appendChild(v),f.appendChild(p)}return f}contentDiv(){const c=document.createElement("div");c.dataset.id=this.settings.id;const f=this.searchDiv();c.appendChild(f.main);const g=this.listDiv();return c.appendChild(g),{main:c,search:f,list:g}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const c=document.createElement("div"),f=document.createElement("input"),g=document.createElement("div");c.classList.add(this.classes.search);const p={main:c,input:f};if(this.settings.showSearch||(c.classList.add(this.classes.hide),f.readOnly=!0),f.type="search",f.placeholder=this.settings.searchPlaceholder,f.tabIndex=-1,f.setAttribute("aria-label",this.settings.searchPlaceholder),f.setAttribute("autocapitalize","off"),f.setAttribute("autocomplete","off"),f.setAttribute("autocorrect","off"),f.oninput=i(v=>{this.callbacks.search(v.target.value)},100),f.onkeydown=v=>{switch(v.key){case"ArrowUp":case"ArrowDown":return v.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case"Enter":case" ":if(this.callbacks.addable&&v.ctrlKey)return g.click(),!1;{const x=this.content.list.querySelector("."+this.classes.highlighted);if(x)return x.click(),!1}return!0}return!0},c.appendChild(f),this.callbacks.addable){g.classList.add(this.classes.addable);const v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.setAttribute("viewBox","0 0 100 100");const x=document.createElementNS("http://www.w3.org/2000/svg","path");x.setAttribute("d",this.classes.addablePath),v.appendChild(x),g.appendChild(v),g.onclick=w=>{if(w.preventDefault(),w.stopPropagation(),!this.callbacks.addable)return;const y=this.content.search.input.value.trim();if(y===""){this.content.search.input.focus();return}const b=T=>{let k=new l(T);if(this.callbacks.addOption(k),this.settings.isMultiple){let M=this.store.getSelected();M.push(k.value),this.callbacks.setSelected(M,!0)}else this.callbacks.setSelected([k.value],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},S=this.callbacks.addable(y);S===!1||S===void 0||S===null||(S instanceof Promise?S.then(T=>{b(typeof T=="string"?{text:T,value:T}:T)}):b(typeof S=="string"?{text:S,value:S}:S))},c.appendChild(g),p.addable={main:g,svg:v,path:x}}return p}searchFocus(){this.content.search.input.focus()}getOptions(c=!1,f=!1,g=!1){let p="."+this.classes.option;return c&&(p+=":not(."+this.classes.placeholder+")"),f&&(p+=":not(."+this.classes.disabled+")"),g&&(p+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(p))}highlight(c){const f=this.getOptions(!0,!0,!0);if(f.length===0)return;if(f.length===1&&!f[0].classList.contains(this.classes.highlighted)){f[0].classList.add(this.classes.highlighted);return}let g=!1;for(const p of f)p.classList.contains(this.classes.highlighted)&&(g=!0);if(!g){for(const p of f)if(p.classList.contains(this.classes.selected)){p.classList.add(this.classes.highlighted);break}}for(let p=0;p<f.length;p++)if(f[p].classList.contains(this.classes.highlighted)){const v=f[p];v.classList.remove(this.classes.highlighted);const x=v.parentElement;if(x&&x.classList.contains(this.classes.open)){const b=x.querySelector("."+this.classes.optgroupLabel);b&&b.click()}let w=f[c==="down"?p+1<f.length?p+1:0:p-1>=0?p-1:f.length-1];w.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,w);const y=w.parentElement;if(y&&y.classList.contains(this.classes.close)){const b=y.querySelector("."+this.classes.optgroupLabel);b&&b.click()}return}f[c==="down"?0:f.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,f[c==="down"?0:f.length-1])}listDiv(){const c=document.createElement("div");return c.classList.add(this.classes.list),c}renderError(c){this.content.list.innerHTML="";const f=document.createElement("div");f.classList.add(this.classes.error),f.textContent=c,this.content.list.appendChild(f)}renderSearching(){this.content.list.innerHTML="";const c=document.createElement("div");c.classList.add(this.classes.searching),c.textContent=this.settings.searchingText,this.content.list.appendChild(c)}renderOptions(c){if(this.content.list.innerHTML="",c.length===0){const f=document.createElement("div");f.classList.add(this.classes.search),f.innerHTML=this.settings.searchText,this.content.list.appendChild(f);return}for(const f of c){if(f instanceof o){const g=document.createElement("div");g.classList.add(this.classes.optgroup);const p=document.createElement("div");p.classList.add(this.classes.optgroupLabel),g.appendChild(p);const v=document.createElement("div");v.classList.add(this.classes.optgroupLabelText),v.textContent=f.label,p.appendChild(v);const x=document.createElement("div");if(x.classList.add(this.classes.optgroupActions),p.appendChild(x),this.settings.isMultiple&&f.selectAll){const w=document.createElement("div");w.classList.add(this.classes.optgroupSelectAll);let y=!0;for(const M of f.options)if(!M.selected){y=!1;break}y&&w.classList.add(this.classes.selected);const b=document.createElement("span");b.textContent=f.selectAllText,w.appendChild(b);const S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttribute("viewBox","0 0 100 100"),w.appendChild(S);const T=document.createElementNS("http://www.w3.org/2000/svg","path");T.setAttribute("d",this.classes.optgroupSelectAllBox),S.appendChild(T);const k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",this.classes.optgroupSelectAllCheck),S.appendChild(k),w.addEventListener("click",M=>{M.preventDefault(),M.stopPropagation();const D=this.store.getSelected();if(y){const N=D.filter(A=>{for(const F of f.options)if(A===F.value)return!1;return!0});this.callbacks.setSelected(N,!0);return}else{const N=D.concat(f.options.map(A=>A.value));for(const A of f.options)this.store.getOptionByID(A.id)||this.callbacks.addOption(A);this.callbacks.setSelected(N,!0);return}}),x.appendChild(w)}if(f.closable!=="off"){const w=document.createElement("div");w.classList.add(this.classes.optgroupClosable);const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("viewBox","0 0 100 100"),y.classList.add(this.classes.arrow),w.appendChild(y);const b=document.createElementNS("http://www.w3.org/2000/svg","path");y.appendChild(b),f.options.some(S=>S.selected)||this.content.search.input.value.trim()!==""?(w.classList.add(this.classes.open),b.setAttribute("d",this.classes.arrowOpen)):f.closable==="open"?(g.classList.add(this.classes.open),b.setAttribute("d",this.classes.arrowOpen)):f.closable==="close"&&(g.classList.add(this.classes.close),b.setAttribute("d",this.classes.arrowClose)),p.addEventListener("click",S=>{S.preventDefault(),S.stopPropagation(),g.classList.contains(this.classes.close)?(g.classList.remove(this.classes.close),g.classList.add(this.classes.open),b.setAttribute("d",this.classes.arrowOpen)):(g.classList.remove(this.classes.open),g.classList.add(this.classes.close),b.setAttribute("d",this.classes.arrowClose))}),x.appendChild(w)}g.appendChild(p);for(const w of f.options)g.appendChild(this.option(w));this.content.list.appendChild(g)}f instanceof l&&this.content.list.appendChild(this.option(f))}}option(c){if(c.placeholder){const g=document.createElement("div");return g.classList.add(this.classes.option),g.classList.add(this.classes.hide),g}const f=document.createElement("div");return f.dataset.id=c.id,f.id=c.id,f.classList.add(this.classes.option),f.setAttribute("role","option"),c.class&&c.class.split(" ").forEach(g=>{f.classList.add(g)}),c.style&&(f.style.cssText=c.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?f.innerHTML=this.highlightText(c.html!==""?c.html:c.text,this.content.search.input.value,this.classes.searchHighlighter):c.html!==""?f.innerHTML=c.html:f.textContent=c.text,this.settings.showOptionTooltips&&f.textContent&&f.setAttribute("title",f.textContent),c.display||f.classList.add(this.classes.hide),c.disabled&&f.classList.add(this.classes.disabled),c.selected&&this.settings.hideSelected&&f.classList.add(this.classes.hide),c.selected?(f.classList.add(this.classes.selected),f.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",f.id)):(f.classList.remove(this.classes.selected),f.setAttribute("aria-selected","false")),f.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation();const p=this.store.getSelected(),v=g.currentTarget,x=String(v.dataset.id);if(c.disabled||c.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=p.length&&!c.selected||this.settings.isMultiple&&this.settings.minSelected>=p.length&&c.selected)return;let w=!1;const y=this.store.getSelectedOptions();let b=[];this.settings.isMultiple&&(c.selected?b=y.filter(S=>S.id!==x):b=y.concat(c)),this.settings.isMultiple||(c.selected?b=[]:b=[c]),this.callbacks.beforeChange||(w=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(b,y)===!1?w=!1:w=!0),w&&(this.store.getOptionByID(x)||this.callbacks.addOption(c),this.callbacks.setSelected(b.map(S=>S.value),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(b))}),f}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(c,f,g){let p=c;const v=new RegExp("("+f.trim()+")(?![^<]*>[^<>]*</)","i");if(!c.match(v))return c;const x=c.match(v).index,w=x+c.match(v)[0].toString().length,y=c.substring(x,w);return p=p.replace(v,`<mark class="${g}">${y}</mark>`),p}moveContentAbove(){const c=this.main.main.offsetHeight,f=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const g=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(c+f-1)+"px 0px 0px 0px",this.content.main.style.top=g.top+g.height+window.scrollY+"px",this.content.main.style.left=g.left+window.scrollX+"px",this.content.main.style.width=g.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const c=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=c.top+c.height+window.scrollY+"px",this.content.main.style.left=c.left+window.scrollX+"px",this.content.main.style.width=c.width+"px")}ensureElementInView(c,f){const g=c.scrollTop+c.offsetTop,p=g+c.clientHeight,v=f.offsetTop,x=v+f.clientHeight;v<g?c.scrollTop-=g-v:x>p&&(c.scrollTop+=x-p)}putContent(){const c=this.main.main.offsetHeight,f=this.main.main.getBoundingClientRect(),g=this.content.main.offsetHeight;return window.innerHeight-(f.top+c)<=g&&f.top>g?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const c=this.store.getSelectedOptions(),f=c&&c.length>0,g=this.settings.isMultiple,p=this.settings.allowDeselect,v=this.main.deselect.main,x=this.classes.hide;p&&!(g&&!f)?v.classList.remove(x):v.classList.add(x)}}class d{constructor(c){this.listen=!1,this.observer=null,this.select=c,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(c){this.listen=c,c&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),c||this.observer&&this.observer.disconnect()}valueChange(c){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedValues()),!0}observeCall(c){if(!this.listen)return;let f=!1,g=!1,p=!1;for(const v of c)v.target===this.select&&(v.attributeName==="disabled"&&(g=!0),v.attributeName==="class"&&(f=!0)),(v.target.nodeName==="OPTGROUP"||v.target.nodeName==="OPTION")&&(p=!0);f&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),g&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),p&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let c=[];const f=this.select.childNodes;for(const g of f)g.nodeName==="OPTGROUP"&&c.push(this.getDataFromOptgroup(g)),g.nodeName==="OPTION"&&c.push(this.getDataFromOption(g));return c}getDataFromOptgroup(c){let f={id:c.id,label:c.label,selectAll:c.dataset?c.dataset.selectall==="true":!1,selectAllText:c.dataset?c.dataset.selectalltext:"Select all",closable:c.dataset?c.dataset.closable:"off",options:[]};const g=c.childNodes;for(const p of g)p.nodeName==="OPTION"&&f.options.push(this.getDataFromOption(p));return f}getDataFromOption(c){return{id:c.id,value:c.value,text:c.text,html:c.dataset&&c.dataset.html?c.dataset.html:"",selected:c.selected,display:c.style.display!=="none",disabled:c.disabled,mandatory:c.dataset?c.dataset.mandatory==="true":!1,placeholder:c.dataset.placeholder==="true",class:c.className,style:c.style.cssText,data:c.dataset}}getSelectedValues(){let c=[];const f=this.select.childNodes;for(const g of f){if(g.nodeName==="OPTGROUP"){const p=g.childNodes;for(const v of p)if(v.nodeName==="OPTION"){const x=v;x.selected&&c.push(x.value)}}if(g.nodeName==="OPTION"){const p=g;p.selected&&c.push(p.value)}}return c}setSelected(c){this.changeListen(!1);const f=this.select.childNodes;for(const g of f){if(g.nodeName==="OPTGROUP"){const v=g.childNodes;for(const x of v)if(x.nodeName==="OPTION"){const w=x;w.selected=c.includes(w.value)}}if(g.nodeName==="OPTION"){const p=g;p.selected=c.includes(p.value)}}this.changeListen(!0)}updateSelect(c,f,g){this.changeListen(!1),c&&(this.select.dataset.id=c),f&&(this.select.style.cssText=f),g&&(this.select.className="",g.forEach(p=>{p.trim()!==""&&this.select.classList.add(p.trim())})),this.changeListen(!0)}updateOptions(c){this.changeListen(!1),this.select.innerHTML="";for(const f of c)f instanceof o&&this.select.appendChild(this.createOptgroup(f)),f instanceof l&&this.select.appendChild(this.createOption(f));this.select.dispatchEvent(new Event("change")),this.changeListen(!0)}createOptgroup(c){const f=document.createElement("optgroup");if(f.id=c.id,f.label=c.label,c.selectAll&&(f.dataset.selectAll="true"),c.closable!=="off"&&(f.dataset.closable=c.closable),c.options)for(const g of c.options)f.appendChild(this.createOption(g));return f}createOption(c){const f=document.createElement("option");return f.id=c.id,f.value=c.value,f.innerHTML=c.text,c.html!==""&&f.setAttribute("data-html",c.html),c.selected&&(f.selected=c.selected),c.disabled&&(f.disabled=!0),c.display===!1&&(f.style.display="none"),c.placeholder&&f.setAttribute("data-placeholder","true"),c.mandatory&&f.setAttribute("data-mandatory","true"),c.class&&c.class.split(" ").forEach(g=>{f.classList.add(g)}),c.data&&typeof c.data=="object"&&Object.keys(c.data).forEach(g=>{f.setAttribute("data-"+a(g),c.data[g])}),f}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class m{constructor(c){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,c||(c={}),this.id="ss-"+n(),this.style=c.style||"",this.class=c.class||[],this.disabled=c.disabled!==void 0?c.disabled:!1,this.alwaysOpen=c.alwaysOpen!==void 0?c.alwaysOpen:!1,this.showSearch=c.showSearch!==void 0?c.showSearch:!0,this.ariaLabel=c.ariaLabel||"Combobox",this.searchPlaceholder=c.searchPlaceholder||"Search",this.searchText=c.searchText||"No Results",this.searchingText=c.searchingText||"Searching...",this.searchHighlight=c.searchHighlight!==void 0?c.searchHighlight:!1,this.closeOnSelect=c.closeOnSelect!==void 0?c.closeOnSelect:!0,this.contentLocation=c.contentLocation||document.body,this.contentPosition=c.contentPosition||"absolute",this.openPosition=c.openPosition||"auto",this.placeholderText=c.placeholderText!==void 0?c.placeholderText:"Select Value",this.allowDeselect=c.allowDeselect!==void 0?c.allowDeselect:!1,this.hideSelected=c.hideSelected!==void 0?c.hideSelected:!1,this.keepOrder=c.keepOrder!==void 0?c.keepOrder:!1,this.showOptionTooltips=c.showOptionTooltips!==void 0?c.showOptionTooltips:!1,this.minSelected=c.minSelected||0,this.maxSelected=c.maxSelected||1e3,this.timeoutDelay=c.timeoutDelay||200,this.maxValuesShown=c.maxValuesShown||20,this.maxValuesMessage=c.maxValuesMessage||"{number} selected"}}class _{constructor(c){var f;if(this.events={search:void 0,searchFilter:(w,y)=>w.text.toLowerCase().indexOf(y.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=i(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=i(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=w=>{!this.settings.isOpen||w.target&&!r(w.target,this.settings.id)&&this.close(w.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof c.select=="string"?document.querySelector(c.select):c.select,!this.selectEl){c.events&&c.events.error&&c.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){c.events&&c.events.error&&c.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new m(c.settings);const g=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const w in c.events)!c.events.hasOwnProperty(w)||(g.indexOf(w)!==-1?this.events[w]=i(c.events[w],100):this.events[w]=c.events[w]);this.settings.disabled=!((f=c.settings)===null||f===void 0)&&f.disabled?c.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new d(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=w=>{this.setSelected(w)},this.select.onClassChange=w=>{this.settings.class=w,this.render.updateClassStyles()},this.select.onDisabledChange=w=>{w?this.disable():this.enable()},this.select.onOptionsChange=w=>{this.setData(w)},this.store=new h(this.settings.isMultiple?"multiple":"single",c.data?c.data:this.select.getData()),c.data&&this.select.updateOptions(this.store.getData());const p={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new u(this.settings,this.store,p),this.render.renderValues(),this.render.renderOptions(this.store.getData());const v=this.selectEl.getAttribute("aria-label"),x=this.selectEl.getAttribute("aria-labelledby");v?this.render.main.main.setAttribute("aria-label",v):x&&this.render.main.main.setAttribute("aria-labelledby",x),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(c){const f=this.store.getSelected(),g=this.store.validateDataArray(c);if(g){this.events.error&&this.events.error(g);return}this.store.setData(c);const p=this.store.getData();this.select.updateOptions(p),this.render.renderValues(),this.render.renderOptions(p),this.events.afterChange&&!s(f,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){return this.store.getSelected()}setSelected(c,f=!0){const g=this.store.getSelected();this.store.setSelectedBy("value",Array.isArray(c)?c:[c]);const p=this.store.getData();this.select.updateOptions(p),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(p),f&&this.events.afterChange&&!s(g,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(c){const f=this.store.getSelected();this.store.getDataOptions().some(p=>{var v;return p.value===((v=c.value)!==null&&v!==void 0?v:c.text)})||this.store.addOption(c);const g=this.store.getData();this.select.updateOptions(g),this.render.renderValues(),this.render.renderOptions(g),this.events.afterChange&&!s(f,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(c=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(c),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(c){if(this.render.content.search.input.value!==c&&(this.render.content.search.input.value=c),!this.events.search){this.render.renderOptions(c===""?this.store.getData():this.store.search(c,this.events.searchFilter));return}this.render.renderSearching();const f=this.events.search(c,this.store.getSelectedOptions());if(f instanceof Promise){f.then(g=>{this.render.renderOptions(this.store.partialToFullData(g))}).catch(g=>{this.render.renderError(typeof g=="string"?g:g.message)});return}else Array.isArray(f)?this.render.renderOptions(this.store.partialToFullData(f)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return _})})(_i);var W=_i.exports;new W({select:"#select-lb-huesca",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-lb-zaragoza",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-lb-teruel",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-city-teruel",searchPlaceholder:"Busca tu municipio"});new W({select:"#filter-city-teruel",searchPlaceholder:"Filtra por municipio"});new W({select:"#percentage-over-city-teruel",searchPlaceholder:"Filtra tu municipio"});new W({select:"#percentage-under-city-teruel",searchPlaceholder:"Filtra tu municipio"});new W({select:"#select-city-huesca",searchPlaceholder:"Busca tu municipio"});new W({select:"#filter-city-huesca",searchPlaceholder:"Filtra tu municipio"});new W({select:"#percentage-over-city-huesca",searchPlaceholder:"Filtra tu municipio"});new W({select:"#percentage-under-city-huesca",searchPlaceholder:"Filtra tu municipio"});new W({select:"#select-city-zaragoza",searchPlaceholder:"Busca tu municipio"});new W({select:"#filter-city-zaragoza",searchPlaceholder:"Filtra tu municipio"});new W({select:"#percentage-over-city-zaragoza",searchPlaceholder:"Filtra tu municipio"});new W({select:"#percentage-under-city-zaragoza",searchPlaceholder:"Filtra tu municipio"});new W({select:"#select-first-year-zaragoza",searchPlaceholder:"Selecciona el primer a\xF1o"});new W({select:"#select-second-year-zaragoza",searchPlaceholder:"Selecciona el segundo a\xF1o"});new W({select:"#select-first-year-teruel",searchPlaceholder:"Selecciona el primer a\xF1o"});new W({select:"#select-second-year-teruel",searchPlaceholder:"Selecciona el segundo a\xF1o"});new W({select:"#select-first-year-huesca",searchPlaceholder:"Selecciona el primer a\xF1o"});new W({select:"#select-second-year-huesca",searchPlaceholder:"Selecciona el segundo a\xF1o"});new W({select:"#select-municipalities-stack-huesca",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-municipalities-stack-zaragoza",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-municipalities-stack-teruel",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-densidad-huesca",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-densidad-zaragoza",searchPlaceholder:"Busca tu municipio"});new W({select:"#select-densidad-teruel",searchPlaceholder:"Busca tu municipio"});var Si={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Qn={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},ia=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ze={CSS:{},springs:{}};function kt(t,e,n){return Math.min(Math.max(t,e),n)}function be(t,e){return t.indexOf(e)>-1}function un(t,e){return t.apply(null,e)}var P={arr:function(t){return Array.isArray(t)},obj:function(t){return be(Object.prototype.toString.call(t),"Object")},pth:function(t){return P.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||P.svg(t)},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t=="undefined"},nil:function(t){return P.und(t)||t===null},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return P.hex(t)||P.rgb(t)||P.hsl(t)},key:function(t){return!Si.hasOwnProperty(t)&&!Qn.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function Mi(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function Ti(t,e){var n=Mi(t),r=kt(P.und(n[0])?1:n[0],.1,100),i=kt(P.und(n[1])?100:n[1],.1,100),s=kt(P.und(n[2])?10:n[2],.1,100),a=kt(P.und(n[3])?0:n[3],.1,100),o=Math.sqrt(i/r),l=s/(2*Math.sqrt(i*r)),h=l<1?o*Math.sqrt(1-l*l):0,u=1,d=l<1?(l*o+-a)/h:-a+o;function m(C){var c=e?e*C/1e3:C;return l<1?c=Math.exp(-c*l*o)*(u*Math.cos(h*c)+d*Math.sin(h*c)):c=(u+d*c)*Math.exp(-c*o),C===0||C===1?C:1-c}function _(){var C=ze.springs[t];if(C)return C;for(var c=1/6,f=0,g=0;;)if(f+=c,m(f)===1){if(g++,g>=16)break}else g=0;var p=f*c*1e3;return ze.springs[t]=p,p}return e?m:_}function sa(t){return t===void 0&&(t=10),function(e){return Math.ceil(kt(e,1e-6,1)*t)*(1/t)}}var aa=function(){var t=11,e=1/(t-1);function n(u,d){return 1-3*d+3*u}function r(u,d){return 3*d-6*u}function i(u){return 3*u}function s(u,d,m){return((n(d,m)*u+r(d,m))*u+i(d))*u}function a(u,d,m){return 3*n(d,m)*u*u+2*r(d,m)*u+i(d)}function o(u,d,m,_,C){var c,f,g=0;do f=d+(m-d)/2,c=s(f,_,C)-u,c>0?m=f:d=f;while(Math.abs(c)>1e-7&&++g<10);return f}function l(u,d,m,_){for(var C=0;C<4;++C){var c=a(d,m,_);if(c===0)return d;var f=s(d,m,_)-u;d-=f/c}return d}function h(u,d,m,_){if(!(0<=u&&u<=1&&0<=m&&m<=1))return;var C=new Float32Array(t);if(u!==d||m!==_)for(var c=0;c<t;++c)C[c]=s(c*e,u,m);function f(g){for(var p=0,v=1,x=t-1;v!==x&&C[v]<=g;++v)p+=e;--v;var w=(g-C[v])/(C[v+1]-C[v]),y=p+w*e,b=a(y,u,m);return b>=.001?l(g,y,u,m):b===0?y:o(g,p,p+e,u,m)}return function(g){return u===d&&m===_||g===0||g===1?g:s(f(g),d,_)}}return h}(),ki=function(){var t={linear:function(){return function(r){return r}}},e={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var i,s=4;r<((i=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((i*3-2)/22-r,2)}},Elastic:function(r,i){r===void 0&&(r=1),i===void 0&&(i=.5);var s=kt(r,1,10),a=kt(i,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},n=["Quad","Cubic","Quart","Quint","Expo"];return n.forEach(function(r,i){e[r]=function(){return function(s){return Math.pow(s,i+2)}}}),Object.keys(e).forEach(function(r){var i=e[r];t["easeIn"+r]=i,t["easeOut"+r]=function(s,a){return function(o){return 1-i(s,a)(1-o)}},t["easeInOut"+r]=function(s,a){return function(o){return o<.5?i(s,a)(o*2)/2:1-i(s,a)(o*-2+2)/2}},t["easeOutIn"+r]=function(s,a){return function(o){return o<.5?(1-i(s,a)(1-o*2))/2:(i(s,a)(o*2-1)+1)/2}}}),t}();function Gn(t,e){if(P.fnc(t))return t;var n=t.split("(")[0],r=ki[n],i=Mi(t);switch(n){case"spring":return Ti(t,e);case"cubicBezier":return un(aa,i);case"steps":return un(sa,i);default:return un(r,i)}}function Li(t){try{var e=document.querySelectorAll(t);return e}catch{return}}function Ke(t,e){for(var n=t.length,r=arguments.length>=2?arguments[1]:void 0,i=[],s=0;s<n;s++)if(s in t){var a=t[s];e.call(r,a,s,t)&&i.push(a)}return i}function Je(t){return t.reduce(function(e,n){return e.concat(P.arr(n)?Je(n):n)},[])}function Ar(t){return P.arr(t)?t:(P.str(t)&&(t=Li(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function Kn(t,e){return t.some(function(n){return n===e})}function Jn(t){var e={};for(var n in t)e[n]=t[n];return e}function kn(t,e){var n=Jn(t);for(var r in t)n[r]=e.hasOwnProperty(r)?e[r]:t[r];return n}function je(t,e){var n=Jn(t);for(var r in e)n[r]=P.und(t[r])?e[r]:t[r];return n}function oa(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function la(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=t.replace(e,function(o,l,h,u){return l+l+h+h+u+u}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),i=parseInt(r[1],16),s=parseInt(r[2],16),a=parseInt(r[3],16);return"rgba("+i+","+s+","+a+",1)"}function ca(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(e[1],10)/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100,s=e[4]||1;function a(m,_,C){return C<0&&(C+=1),C>1&&(C-=1),C<1/6?m+(_-m)*6*C:C<1/2?_:C<2/3?m+(_-m)*(2/3-C)*6:m}var o,l,h;if(r==0)o=l=h=i;else{var u=i<.5?i*(1+r):i+r-i*r,d=2*i-u;o=a(d,u,n+1/3),l=a(d,u,n),h=a(d,u,n-1/3)}return"rgba("+o*255+","+l*255+","+h*255+","+s+")"}function ua(t){if(P.rgb(t))return oa(t);if(P.hex(t))return la(t);if(P.hsl(t))return ca(t)}function Ht(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function fa(t){if(be(t,"translate")||t==="perspective")return"px";if(be(t,"rotate")||be(t,"skew"))return"deg"}function Ln(t,e){return P.fnc(t)?t(e.target,e.id,e.total):t}function Lt(t,e){return t.getAttribute(e)}function jn(t,e,n){var r=Ht(e);if(Kn([n,"deg","rad","turn"],r))return e;var i=ze.CSS[e+n];if(!P.und(i))return i;var s=100,a=document.createElement(t.tagName),o=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+n;var l=s/a.offsetWidth;o.removeChild(a);var h=l*parseFloat(e);return ze.CSS[e+n]=h,h}function Ai(t,e,n){if(e in t.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=t.style[e]||getComputedStyle(t).getPropertyValue(r)||"0";return n?jn(t,i,n):i}}function tr(t,e){if(P.dom(t)&&!P.inp(t)&&(!P.nil(Lt(t,e))||P.svg(t)&&t[e]))return"attribute";if(P.dom(t)&&Kn(ia,e))return"transform";if(P.dom(t)&&e!=="transform"&&Ai(t,e))return"css";if(t[e]!=null)return"object"}function Di(t){if(!!P.dom(t)){for(var e=t.style.transform||"",n=/(\w+)\(([^)]*)\)/g,r=new Map,i;i=n.exec(e);)r.set(i[1],i[2]);return r}}function ha(t,e,n,r){var i=be(e,"scale")?1:0+fa(e),s=Di(t).get(e)||i;return n&&(n.transforms.list.set(e,s),n.transforms.last=e),r?jn(t,s,r):s}function er(t,e,n,r){switch(tr(t,e)){case"transform":return ha(t,e,r,n);case"css":return Ai(t,e,n);case"attribute":return Lt(t,e);default:return t[e]||0}}function nr(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var r=Ht(t)||0,i=parseFloat(e),s=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return i+s+r;case"-":return i-s+r;case"*":return i*s+r}}function $i(t,e){if(P.col(t))return ua(t);if(/\s/g.test(t))return t;var n=Ht(t),r=n?t.substr(0,t.length-n.length):t;return e?r+e:r}function rr(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function da(t){return Math.PI*2*Lt(t,"r")}function pa(t){return Lt(t,"width")*2+Lt(t,"height")*2}function ga(t){return rr({x:Lt(t,"x1"),y:Lt(t,"y1")},{x:Lt(t,"x2"),y:Lt(t,"y2")})}function Oi(t){for(var e=t.points,n=0,r,i=0;i<e.numberOfItems;i++){var s=e.getItem(i);i>0&&(n+=rr(r,s)),r=s}return n}function ma(t){var e=t.points;return Oi(t)+rr(e.getItem(e.numberOfItems-1),e.getItem(0))}function Ei(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return da(t);case"rect":return pa(t);case"line":return ga(t);case"polyline":return Oi(t);case"polygon":return ma(t)}}function va(t){var e=Ei(t);return t.setAttribute("stroke-dasharray",e),e}function ya(t){for(var e=t.parentNode;P.svg(e)&&P.svg(e.parentNode);)e=e.parentNode;return e}function Pi(t,e){var n=e||{},r=n.el||ya(t),i=r.getBoundingClientRect(),s=Lt(r,"viewBox"),a=i.width,o=i.height,l=n.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:a,h:o,vW:l[2],vH:l[3]}}function xa(t,e){var n=P.str(t)?Li(t)[0]:t,r=e||100;return function(i){return{property:i,el:n,svg:Pi(n),totalLength:Ei(n)*(r/100)}}}function wa(t,e,n){function r(u){u===void 0&&(u=0);var d=e+u>=1?e+u:0;return t.el.getPointAtLength(d)}var i=Pi(t.el,t.svg),s=r(),a=r(-1),o=r(1),l=n?1:i.w/i.vW,h=n?1:i.h/i.vH;switch(t.property){case"x":return(s.x-i.x)*l;case"y":return(s.y-i.y)*h;case"angle":return Math.atan2(o.y-a.y,o.x-a.x)*180/Math.PI}}function Dr(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=$i(P.pth(t)?t.totalLength:t,e)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:P.str(t)||e?r.split(n):[]}}function ir(t){var e=t?Je(P.arr(t)?t.map(Ar):Ar(t)):[];return Ke(e,function(n,r,i){return i.indexOf(n)===r})}function Ni(t){var e=ir(t);return e.map(function(n,r){return{target:n,id:r,total:e.length,transforms:{list:Di(n)}}})}function ba(t,e){var n=Jn(e);if(/^spring/.test(n.easing)&&(n.duration=Ti(n.easing)),P.arr(t)){var r=t.length,i=r===2&&!P.obj(t[0]);i?t={value:t}:P.fnc(e.duration)||(n.duration=e.duration/r)}var s=P.arr(t)?t:[t];return s.map(function(a,o){var l=P.obj(a)&&!P.pth(a)?a:{value:a};return P.und(l.delay)&&(l.delay=o?0:e.delay),P.und(l.endDelay)&&(l.endDelay=o===s.length-1?e.endDelay:0),l}).map(function(a){return je(a,n)})}function Ca(t){for(var e=Ke(Je(t.map(function(s){return Object.keys(s)})),function(s){return P.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),n={},r=function(s){var a=e[s];n[a]=t.map(function(o){var l={};for(var h in o)P.key(h)?h==a&&(l.value=o[h]):l[h]=o[h];return l})},i=0;i<e.length;i++)r(i);return n}function _a(t,e){var n=[],r=e.keyframes;r&&(e=je(Ca(r),e));for(var i in e)P.key(i)&&n.push({name:i,tweens:ba(e[i],t)});return n}function Sa(t,e){var n={};for(var r in t){var i=Ln(t[r],e);P.arr(i)&&(i=i.map(function(s){return Ln(s,e)}),i.length===1&&(i=i[0])),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function Ma(t,e){var n;return t.tweens.map(function(r){var i=Sa(r,e),s=i.value,a=P.arr(s)?s[1]:s,o=Ht(a),l=er(e.target,t.name,o,e),h=n?n.to.original:l,u=P.arr(s)?s[0]:h,d=Ht(u)||Ht(l),m=o||d;return P.und(a)&&(a=h),i.from=Dr(u,m),i.to=Dr(nr(a,u),m),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Gn(i.easing,i.duration),i.isPath=P.pth(s),i.isPathTargetInsideSVG=i.isPath&&P.svg(e.target),i.isColor=P.col(i.from.original),i.isColor&&(i.round=1),n=i,i})}var Fi={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,r,i){if(r.list.set(e,n),e===r.last||i){var s="";r.list.forEach(function(a,o){s+=o+"("+a+") "}),t.style.transform=s}}};function Ui(t,e){var n=Ni(t);n.forEach(function(r){for(var i in e){var s=Ln(e[i],r),a=r.target,o=Ht(s),l=er(a,i,o,r),h=o||Ht(l),u=nr($i(s,h),l),d=tr(a,i);Fi[d](a,i,u,r.transforms,!0)}})}function Ta(t,e){var n=tr(t.target,e.name);if(n){var r=Ma(e,t),i=r[r.length-1];return{type:n,property:e.name,animatable:t,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}function ka(t,e){return Ke(Je(t.map(function(n){return e.map(function(r){return Ta(n,r)})})),function(n){return!P.und(n)})}function zi(t,e){var n=t.length,r=function(s){return s.timelineOffset?s.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,t.map(function(s){return r(s)+s.duration})):e.duration,i.delay=n?Math.min.apply(Math,t.map(function(s){return r(s)+s.delay})):e.delay,i.endDelay=n?i.duration-Math.max.apply(Math,t.map(function(s){return r(s)+s.duration-s.endDelay})):e.endDelay,i}var $r=0;function La(t){var e=kn(Si,t),n=kn(Qn,t),r=_a(n,t),i=Ni(t.targets),s=ka(i,r),a=zi(s,n),o=$r;return $r++,je(e,{id:o,children:[],animatables:i,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var Ct=[],Ii=function(){var t;function e(){!t&&(!Or()||!Q.suspendWhenDocumentHidden)&&Ct.length>0&&(t=requestAnimationFrame(n))}function n(i){for(var s=Ct.length,a=0;a<s;){var o=Ct[a];o.paused?(Ct.splice(a,1),s--):(o.tick(i),a++)}t=a>0?requestAnimationFrame(n):void 0}function r(){!Q.suspendWhenDocumentHidden||(Or()?t=cancelAnimationFrame(t):(Ct.forEach(function(i){return i._onDocumentVisibility()}),Ii()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",r),e}();function Or(){return!!document&&document.hidden}function Q(t){t===void 0&&(t={});var e=0,n=0,r=0,i,s=0,a=null;function o(p){var v=window.Promise&&new Promise(function(x){return a=x});return p.finished=v,v}var l=La(t);o(l);function h(){var p=l.direction;p!=="alternate"&&(l.direction=p!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,i.forEach(function(v){return v.reversed=l.reversed})}function u(p){return l.reversed?l.duration-p:p}function d(){e=0,n=u(l.currentTime)*(1/Q.speed)}function m(p,v){v&&v.seek(p-v.timelineOffset)}function _(p){if(l.reversePlayback)for(var x=s;x--;)m(p,i[x]);else for(var v=0;v<s;v++)m(p,i[v])}function C(p){for(var v=0,x=l.animations,w=x.length;v<w;){var y=x[v],b=y.animatable,S=y.tweens,T=S.length-1,k=S[T];T&&(k=Ke(S,function(xt){return p<xt.end})[0]||k);for(var M=kt(p-k.start-k.delay,0,k.duration)/k.duration,D=isNaN(M)?1:k.easing(M),N=k.to.strings,A=k.round,F=[],E=k.to.numbers.length,$=void 0,V=0;V<E;V++){var I=void 0,j=k.to.numbers[V],dt=k.from.numbers[V]||0;k.isPath?I=wa(k.value,D*j,k.isPathTargetInsideSVG):I=dt+D*(j-dt),A&&(k.isColor&&V>2||(I=Math.round(I*A)/A)),F.push(I)}var ct=N.length;if(!ct)$=F[0];else{$=N[0];for(var at=0;at<ct;at++){N[at];var H=N[at+1],Z=F[at];isNaN(Z)||(H?$+=Z+H:$+=Z+" ")}}Fi[y.type](b.target,y.property,$,b.transforms),y.currentValue=$,v++}}function c(p){l[p]&&!l.passThrough&&l[p](l)}function f(){l.remaining&&l.remaining!==!0&&l.remaining--}function g(p){var v=l.duration,x=l.delay,w=v-l.endDelay,y=u(p);l.progress=kt(y/v*100,0,100),l.reversePlayback=y<l.currentTime,i&&_(y),!l.began&&l.currentTime>0&&(l.began=!0,c("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,c("loopBegin")),y<=x&&l.currentTime!==0&&C(0),(y>=w&&l.currentTime!==v||!v)&&C(v),y>x&&y<w?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,c("changeBegin")),c("change"),C(y)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,c("changeComplete")),l.currentTime=kt(y,0,v),l.began&&c("update"),p>=v&&(n=0,f(),l.remaining?(e=r,c("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&h()):(l.paused=!0,l.completed||(l.completed=!0,c("loopComplete"),c("complete"),!l.passThrough&&"Promise"in window&&(a(),o(l)))))}return l.reset=function(){var p=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=p==="reverse",l.remaining=l.loop,i=l.children,s=i.length;for(var v=s;v--;)l.children[v].reset();(l.reversed&&l.loop!==!0||p==="alternate"&&l.loop===1)&&l.remaining++,C(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(p,v){return Ui(p,v),l},l.tick=function(p){r=p,e||(e=r),g((r+(n-e))*Q.speed)},l.seek=function(p){g(u(p))},l.pause=function(){l.paused=!0,d()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,Ct.push(l),d(),Ii())},l.reverse=function(){h(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(p){var v=ir(p);Yi(v,l)},l.reset(),l.autoplay&&l.play(),l}function Er(t,e){for(var n=e.length;n--;)Kn(t,e[n].animatable.target)&&e.splice(n,1)}function Yi(t,e){var n=e.animations,r=e.children;Er(t,n);for(var i=r.length;i--;){var s=r[i],a=s.animations;Er(t,a),!a.length&&!s.children.length&&r.splice(i,1)}!n.length&&!r.length&&e.pause()}function Aa(t){for(var e=ir(t),n=Ct.length;n--;){var r=Ct[n];Yi(e,r)}}function Da(t,e){e===void 0&&(e={});var n=e.direction||"normal",r=e.easing?Gn(e.easing):null,i=e.grid,s=e.axis,a=e.from||0,o=a==="first",l=a==="center",h=a==="last",u=P.arr(t),d=parseFloat(u?t[0]:t),m=u?parseFloat(t[1]):0,_=Ht(u?t[1]:t)||0,C=e.start||0+(u?d:0),c=[],f=0;return function(g,p,v){if(o&&(a=0),l&&(a=(v-1)/2),h&&(a=v-1),!c.length){for(var x=0;x<v;x++){if(!i)c.push(Math.abs(a-x));else{var w=l?(i[0]-1)/2:a%i[0],y=l?(i[1]-1)/2:Math.floor(a/i[0]),b=x%i[0],S=Math.floor(x/i[0]),T=w-b,k=y-S,M=Math.sqrt(T*T+k*k);s==="x"&&(M=-T),s==="y"&&(M=-k),c.push(M)}f=Math.max.apply(Math,c)}r&&(c=c.map(function(N){return r(N/f)*f})),n==="reverse"&&(c=c.map(function(N){return s?N<0?N*-1:-N:Math.abs(f-N)}))}var D=u?(m-d)/f:d;return C+D*(Math.round(c[p]*100)/100)+_}}function $a(t){t===void 0&&(t={});var e=Q(t);return e.duration=0,e.add=function(n,r){var i=Ct.indexOf(e),s=e.children;i>-1&&Ct.splice(i,1);function a(m){m.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=je(n,kn(Qn,t));l.targets=l.targets||t.targets;var h=e.duration;l.autoplay=!1,l.direction=e.direction,l.timelineOffset=P.und(r)?h:nr(r,h),a(e),e.seek(l.timelineOffset);var u=Q(l);a(u),s.push(u);var d=zi(s,t);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}Q.version="3.2.1";Q.speed=1;Q.suspendWhenDocumentHidden=!0;Q.running=Ct;Q.remove=Aa;Q.get=er;Q.set=Ui;Q.convertPx=jn;Q.path=xa;Q.setDashoffset=va;Q.stagger=Da;Q.timeline=$a;Q.easing=Gn;Q.penner=ki;Q.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};function Oa(){const t=document.querySelector(".overlay"),e=document.querySelector(".navegacion"),n=document.querySelector("body"),r=document.querySelectorAll(".navegacion-btn"),i=document.querySelector(".burger");function s(){i.classList.toggle("clicked"),t.classList.toggle("show"),e.classList.toggle("show"),n.classList.toggle("overflow")}document.querySelector(".burger").addEventListener("click",s),document.querySelector(".overlay").addEventListener("click",s);for(let o=0;o<r.length;o++)r[o].addEventListener("click",function(){a()});function a(){t.classList.remove("show"),e.classList.remove("show"),i.classList.remove("clicked")}}const Ea=window.innerWidth>0?window.innerWidth:screen.width;function Pa(){const t=document.querySelector("#aragones"),e=document.querySelector("#castellano"),n=document.querySelector(".aragones"),r=document.querySelector(".castellano");t.onclick=function(){r.classList.remove("active"),n.classList.remove("hidden"),n.classList.toggle("active"),r.classList.toggle("hidden"),t.classList.remove("active"),e.classList.remove("hidden"),t.classList.toggle("hidden"),e.classList.toggle("active")},e.onclick=function(){n.classList.remove("active"),r.classList.remove("hidden"),r.classList.toggle("active"),n.classList.toggle("hidden"),e.classList.remove("active"),t.classList.remove("hidden"),e.classList.toggle("hidden"),t.classList.toggle("active")}}function Na(){Q.timeline().add({targets:".header-title .letter",translateY:[0,"1.5rem"],translateZ:0,duration:750,delay:Q.stagger(500)}).add({targets:".letter",translateY:["1.5rem","2rem"],translateZ:0,rotate:45,duration:750,delay:Q.stagger(1e3)})}var An="http://www.w3.org/1999/xhtml",Pr={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pr.hasOwnProperty(e)?{space:Pr[e],local:t}:t}function Fa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===An&&e.documentElement.namespaceURI===An?e.createElement(t):e.createElementNS(n,t)}}function Ua(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vi(t){var e=tn(t);return(e.local?Ua:Fa)(e)}function za(){}function sr(t){return t==null?za:function(){return this.querySelector(t)}}function Ia(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,h,u=0;u<a;++u)(l=s[u])&&(h=t.call(l,l.__data__,u,s))&&("__data__"in l&&(h.__data__=l.__data__),o[u]=h);return new lt(r,this._parents)}function ar(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ya(){return[]}function Hi(t){return t==null?Ya:function(){return this.querySelectorAll(t)}}function Va(t){return function(){var e=t.apply(this,arguments);return e==null?[]:ar(e)}}function Ha(t){typeof t=="function"?t=Va(t):t=Hi(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,h=0;h<o;++h)(l=a[h])&&(r.push(t.call(l,l.__data__,h,a)),i.push(l));return new lt(r,i)}function Bi(t){return function(){return this.matches(t)}}function Ri(t){return function(e){return e.matches(t)}}var Ba=Array.prototype.find;function Ra(t){return function(){return Ba.call(this.children,t)}}function Wa(){return this.firstElementChild}function qa(t){return this.select(t==null?Wa:Ra(typeof t=="function"?t:Ri(t)))}var Xa=Array.prototype.filter;function Za(){return this.children}function Qa(t){return function(){return Xa.call(this.children,t)}}function Ga(t){return this.selectAll(t==null?Za:Qa(typeof t=="function"?t:Ri(t)))}function Ka(t){typeof t!="function"&&(t=Bi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,h=0;h<a;++h)(l=s[h])&&t.call(l,l.__data__,h,s)&&o.push(l);return new lt(r,this._parents)}function Wi(t){return new Array(t.length)}function Ja(){return new lt(this._enter||this._groups.map(Wi),this._parents)}function Ie(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ie.prototype={constructor:Ie,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ja(t){return function(){return t}}function to(t,e,n,r,i,s){for(var a=0,o,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new Ie(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function eo(t,e,n,r,i,s,a){var o,l,h=new Map,u=e.length,d=s.length,m=new Array(u),_;for(o=0;o<u;++o)(l=e[o])&&(m[o]=_=a.call(l,l.__data__,o,e)+"",h.has(_)?i[o]=l:h.set(_,l));for(o=0;o<d;++o)_=a.call(t,s[o],o,s)+"",(l=h.get(_))?(r[o]=l,l.__data__=s[o],h.delete(_)):n[o]=new Ie(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&h.get(m[o])===l&&(i[o]=l)}function no(t){return t.__data__}function ro(t,e){if(!arguments.length)return Array.from(this,no);var n=e?eo:to,r=this._parents,i=this._groups;typeof t!="function"&&(t=ja(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),h=0;h<s;++h){var u=r[h],d=i[h],m=d.length,_=ar(t.call(u,u&&u.__data__,h,r)),C=_.length,c=o[h]=new Array(C),f=a[h]=new Array(C),g=l[h]=new Array(m);n(u,d,c,f,g,_,e);for(var p=0,v=0,x,w;p<C;++p)if(x=c[p]){for(p>=v&&(v=p+1);!(w=f[v])&&++v<C;);x._next=w||null}}return a=new lt(a,r),a._enter=o,a._exit=l,a}function io(){return new lt(this._exit||this._groups.map(Wi),this._parents)}function so(t,e,n){var r=this.enter(),i=this,s=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function ao(t){if(!(t instanceof lt))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],h=n[o],u=l.length,d=a[o]=new Array(u),m,_=0;_<u;++_)(m=l[_]||h[_])&&(d[_]=m);for(;o<r;++o)a[o]=e[o];return new lt(a,this._parents)}function oo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function lo(t){t||(t=co);function e(d,m){return d&&m?t(d.__data__,m.__data__):!d-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),h,u=0;u<o;++u)(h=a[u])&&(l[u]=h);l.sort(e)}return new lt(i,this._parents).order()}function co(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function uo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fo(){return Array.from(this)}function ho(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function po(){let t=0;for(const e of this)++t;return t}function go(){return!this.node()}function mo(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function vo(t){return function(){this.removeAttribute(t)}}function yo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xo(t,e){return function(){this.setAttribute(t,e)}}function wo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Co(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _o(t,e){var n=tn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?yo:vo:typeof e=="function"?n.local?Co:bo:n.local?wo:xo)(n,e))}function qi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function So(t){return function(){this.style.removeProperty(t)}}function Mo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function To(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ko(t,e,n){return arguments.length>1?this.each((e==null?So:typeof e=="function"?To:Mo)(t,e,n==null?"":n)):ae(this.node(),t)}function ae(t,e){return t.style.getPropertyValue(e)||qi(t).getComputedStyle(t,null).getPropertyValue(e)}function Lo(t){return function(){delete this[t]}}function Ao(t,e){return function(){this[t]=e}}function Do(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function $o(t,e){return arguments.length>1?this.each((e==null?Lo:typeof e=="function"?Do:Ao)(t,e)):this.node()[t]}function Xi(t){return t.trim().split(/^|\s+/)}function or(t){return t.classList||new Zi(t)}function Zi(t){this._node=t,this._names=Xi(t.getAttribute("class")||"")}Zi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Qi(t,e){for(var n=or(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gi(t,e){for(var n=or(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Oo(t){return function(){Qi(this,t)}}function Eo(t){return function(){Gi(this,t)}}function Po(t,e){return function(){(e.apply(this,arguments)?Qi:Gi)(this,t)}}function No(t,e){var n=Xi(t+"");if(arguments.length<2){for(var r=or(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Po:e?Oo:Eo)(n,e))}function Fo(){this.textContent=""}function Uo(t){return function(){this.textContent=t}}function zo(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Io(t){return arguments.length?this.each(t==null?Fo:(typeof t=="function"?zo:Uo)(t)):this.node().textContent}function Yo(){this.innerHTML=""}function Vo(t){return function(){this.innerHTML=t}}function Ho(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Bo(t){return arguments.length?this.each(t==null?Yo:(typeof t=="function"?Ho:Vo)(t)):this.node().innerHTML}function Ro(){this.nextSibling&&this.parentNode.appendChild(this)}function Wo(){return this.each(Ro)}function qo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xo(){return this.each(qo)}function Zo(t){var e=typeof t=="function"?t:Vi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Qo(){return null}function Go(t,e){var n=typeof t=="function"?t:Vi(t),r=e==null?Qo:typeof e=="function"?e:sr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ko(){var t=this.parentNode;t&&t.removeChild(this)}function Jo(){return this.each(Ko)}function jo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function el(t){return this.select(t?tl:jo)}function nl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rl(t){return function(e){t.call(this,e,this.__data__)}}function il(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function sl(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function al(t,e,n){return function(){var r=this.__on,i,s=rl(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ol(t,e,n){var r=il(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,h=o.length,u;l<h;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?al:sl,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Ki(t,e,n){var r=qi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ll(t,e){return function(){return Ki(this,t,e)}}function cl(t,e){return function(){return Ki(this,t,e.apply(this,arguments))}}function ul(t,e){return this.each((typeof e=="function"?cl:ll)(t,e))}function*fl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var lr=[null];function lt(t,e){this._groups=t,this._parents=e}function ke(){return new lt([[document.documentElement]],lr)}function hl(){return this}lt.prototype=ke.prototype={constructor:lt,select:Ia,selectAll:Ha,selectChild:qa,selectChildren:Ga,filter:Ka,data:ro,enter:Ja,exit:io,join:so,merge:ao,selection:hl,order:oo,sort:lo,call:uo,nodes:fo,node:ho,size:po,empty:go,each:mo,attr:_o,style:ko,property:$o,classed:No,text:Io,html:Bo,raise:Wo,lower:Xo,append:Zo,insert:Go,remove:Jo,clone:el,datum:nl,on:ol,dispatch:ul,[Symbol.iterator]:fl};function Dt(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],lr)}function $t(t){return typeof t=="string"?new lt([document.querySelectorAll(t)],[document.documentElement]):new lt([t==null?[]:ar(t)],lr)}function Ji(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Le(t){let e=t,n=t;t.length===1&&(e=(a,o)=>t(a)-o,n=dl(t));function r(a,o,l,h){for(l==null&&(l=0),h==null&&(h=a.length);l<h;){const u=l+h>>>1;n(a[u],o)<0?l=u+1:h=u}return l}function i(a,o,l,h){for(l==null&&(l=0),h==null&&(h=a.length);l<h;){const u=l+h>>>1;n(a[u],o)>0?h=u:l=u+1}return l}function s(a,o,l,h){l==null&&(l=0),h==null&&(h=a.length);const u=r(a,o,l,h-1);return u>l&&e(a[u-1],o)>-e(a[u],o)?u-1:u}return{left:r,center:s,right:i}}function dl(t){return(e,n)=>Ji(t(e),n)}function pl(t){return t===null?NaN:+t}const ji=Le(Ji),gl=ji.right;ji.left;Le(pl).center;var ml=gl;function cr(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Dn extends Map{constructor(e=[],n=xl){super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}});for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Nr(this,e))}has(e){return super.has(Nr(this,e))}set(e,n){return super.set(vl(this,e),n)}delete(e){return super.delete(yl(this,e))}}function Nr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function vl({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function yl({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function xl(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $n(t){return t}function wl(t,...e){return ts(t,$n,$n,e)}function bl(t,e,...n){return ts(t,$n,e,n)}function ts(t,e,n,r){return function i(s,a){if(a>=r.length)return n(s);const o=new Dn,l=r[a++];let h=-1;for(const u of s){const d=l(u,++h,s),m=o.get(d);m?m.push(u):o.set(d,[u])}for(const[u,d]of o)o.set(u,i(d,a));return e(o)}(t,0)}var On=Math.sqrt(50),En=Math.sqrt(10),Pn=Math.sqrt(2);function Cl(t,e,n){var r,i=-1,s,a,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(o=es(t,e,n))===0||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(s=Math.ceil(e-t+1));++i<s;)a[i]=(t+i)*o;else for(o=-o,t=Math.ceil(t*o),e=Math.floor(e*o),a=new Array(s=Math.ceil(e-t+1));++i<s;)a[i]=(t+i)/o;return r&&a.reverse(),a}function es(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=On?10:s>=En?5:s>=Pn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=On?10:s>=En?5:s>=Pn?2:1)}function Nn(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=On?i*=10:s>=En?i*=5:s>=Pn&&(i*=2),e<t?-i:i}function Ot(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Et(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function _l(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Sl(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}const Fn=Math.PI,Un=2*Fn,Xt=1e-6,Ml=Un-Xt;function zn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ur(){return new zn}zn.prototype=ur.prototype={constructor:zn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-t,l=r-e,h=s-t,u=a-e,d=h*h+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Xt)if(!(Math.abs(u*o-l*h)>Xt)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var m=n-s,_=r-a,C=o*o+l*l,c=m*m+_*_,f=Math.sqrt(C),g=Math.sqrt(d),p=i*Math.tan((Fn-Math.acos((C+d-c)/(2*f*g)))/2),v=p/g,x=p/f;Math.abs(v-1)>Xt&&(this._+="L"+(t+v*h)+","+(e+v*u)),this._+="A"+i+","+i+",0,0,"+ +(u*m>h*_)+","+(this._x1=t+x*o)+","+(this._y1=e+x*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),l=t+a,h=e+o,u=1^s,d=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+h:(Math.abs(this._x1-l)>Xt||Math.abs(this._y1-h)>Xt)&&(this._+="L"+l+","+h),n&&(d<0&&(d=d%Un+Un),d>Ml?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=h):d>Xt&&(this._+="A"+n+","+n+",0,"+ +(d>=Fn)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function J(t){return function(){return t}}function fr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ns(t){this._context=t}ns.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function rs(t){return new ns(t)}function is(t){return t[0]}function ss(t){return t[1]}function Ae(t,e){var n=J(!0),r=null,i=rs,s=null;t=typeof t=="function"?t:t===void 0?is:J(t),e=typeof e=="function"?e:e===void 0?ss:J(e);function a(o){var l,h=(o=fr(o)).length,u,d=!1,m;for(r==null&&(s=i(m=ur())),l=0;l<=h;++l)!(l<h&&n(u=o[l],l,o))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(u,l,o),+e(u,l,o));if(m)return s=null,m+""||null}return a.x=function(o){return arguments.length?(t=typeof o=="function"?o:J(+o),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:J(+o),a):e},a.defined=function(o){return arguments.length?(n=typeof o=="function"?o:J(!!o),a):n},a.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),a):i},a.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),a):r},a}function as(t,e,n){var r=null,i=J(!0),s=null,a=rs,o=null;t=typeof t=="function"?t:t===void 0?is:J(+t),e=typeof e=="function"?e:J(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?ss:J(+n);function l(u){var d,m,_,C=(u=fr(u)).length,c,f=!1,g,p=new Array(C),v=new Array(C);for(s==null&&(o=a(g=ur())),d=0;d<=C;++d){if(!(d<C&&i(c=u[d],d,u))===f)if(f=!f)m=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),_=d-1;_>=m;--_)o.point(p[_],v[_]);o.lineEnd(),o.areaEnd()}f&&(p[d]=+t(c,d,u),v[d]=+e(c,d,u),o.point(r?+r(c,d,u):p[d],n?+n(c,d,u):v[d]))}if(g)return o=null,g+""||null}function h(){return Ae().defined(i).curve(a).context(s)}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:J(+u),r=null,l):t},l.x0=function(u){return arguments.length?(t=typeof u=="function"?u:J(+u),l):t},l.x1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:J(+u),l):r},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:J(+u),n=null,l):e},l.y0=function(u){return arguments.length?(e=typeof u=="function"?u:J(+u),l):e},l.y1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:J(+u),l):n},l.lineX0=l.lineY0=function(){return h().x(t).y(e)},l.lineY1=function(){return h().x(t).y(n)},l.lineX1=function(){return h().x(r).y(e)},l.defined=function(u){return arguments.length?(i=typeof u=="function"?u:J(!!u),l):i},l.curve=function(u){return arguments.length?(a=u,s!=null&&(o=a(s)),l):a},l.context=function(u){return arguments.length?(u==null?s=o=null:o=a(s=u),l):s},l}function Fr(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function os(t,e){this._context=t,this._k=(1-e)/6}os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Fr(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Fr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Tl=function t(e){function n(r){return new os(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Ur(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function In(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function kl(t,e){return t[e]}function Ll(t){const e=[];return e.key=t,e}function ls(){var t=J([]),e=In,n=Ur,r=kl;function i(s){var a=Array.from(t.apply(this,arguments),Ll),o,l=a.length,h=-1,u;for(const d of s)for(o=0,++h;o<l;++o)(a[o][h]=[0,+r(d,a[o].key,h,s)]).data=d;for(o=0,u=fr(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:J(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:J(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?In:typeof s=="function"?s:J(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s==null?Ur:s,i):n},i}function Al(t){var e=t.map(Dl);return In(t).sort(function(n,r){return e[n]-e[r]})}function Dl(t){for(var e=-1,n=0,r=t.length,i,s=-1/0;++e<r;)(i=+t[e][1])>s&&(s=i,n=e);return n}function $l(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function cs(t){var e=t.length,n,r,i=t.map($l),s=Al(t),a=0,o=0,l=[],h=[];for(n=0;n<e;++n)r=s[n],a<o?(a+=i[r],l.push(r)):(o+=i[r],h.push(r));return h.reverse().concat(l)}function en(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const zr=Symbol("implicit");function nn(){var t=new Dn,e=[],n=[],r=zr;function i(s){let a=t.get(s);if(a===void 0){if(r!==zr)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Dn;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return nn(e,n).unknown(r)},en.apply(i,arguments),i}function us(){var t=nn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,h=0,u=.5;delete t.unknown;function d(){var m=e().length,_=i<r,C=_?i:r,c=_?r:i;s=(c-C)/Math.max(1,m-l+h*2),o&&(s=Math.floor(s)),C+=(c-C-s*(m-l))*u,a=s*(1-l),o&&(C=Math.round(C),a=Math.round(a));var f=_l(m).map(function(g){return C+s*g});return n(_?f.reverse():f)}return t.domain=function(m){return arguments.length?(e(m),d()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(m){return arguments.length?(o=!!m,d()):o},t.padding=function(m){return arguments.length?(l=Math.min(1,h=+m),d()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),d()):l},t.paddingOuter=function(m){return arguments.length?(h=+m,d()):h},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),d()):u},t.copy=function(){return us(e(),[r,i]).round(o).paddingInner(l).paddingOuter(h).align(u)},en.apply(d(),arguments)}function hr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function fs(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function De(){}var Ce=.7,Ye=1/Ce,ie="\\s*([+-]?\\d+)\\s*",_e="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ol=/^#([0-9a-f]{3,8})$/,El=new RegExp("^rgb\\("+[ie,ie,ie]+"\\)$"),Pl=new RegExp("^rgb\\("+[At,At,At]+"\\)$"),Nl=new RegExp("^rgba\\("+[ie,ie,ie,_e]+"\\)$"),Fl=new RegExp("^rgba\\("+[At,At,At,_e]+"\\)$"),Ul=new RegExp("^hsl\\("+[_e,At,At]+"\\)$"),zl=new RegExp("^hsla\\("+[_e,At,At,_e]+"\\)$"),Ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hr(De,Zt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yr,formatHex:Yr,formatHsl:Il,formatRgb:Vr,toString:Vr});function Yr(){return this.rgb().formatHex()}function Il(){return hs(this).formatHsl()}function Vr(){return this.rgb().formatRgb()}function Zt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ol.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Hr(e):n===3?new mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Oe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Oe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=El.exec(t))?new mt(e[1],e[2],e[3],1):(e=Pl.exec(t))?new mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Nl.exec(t))?Oe(e[1],e[2],e[3],e[4]):(e=Fl.exec(t))?Oe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ul.exec(t))?Wr(e[1],e[2]/100,e[3]/100,1):(e=zl.exec(t))?Wr(e[1],e[2]/100,e[3]/100,e[4]):Ir.hasOwnProperty(t)?Hr(Ir[t]):t==="transparent"?new mt(NaN,NaN,NaN,0):null}function Hr(t){return new mt(t>>16&255,t>>8&255,t&255,1)}function Oe(t,e,n,r){return r<=0&&(t=e=n=NaN),new mt(t,e,n,r)}function Yl(t){return t instanceof De||(t=Zt(t)),t?(t=t.rgb(),new mt(t.r,t.g,t.b,t.opacity)):new mt}function Yn(t,e,n,r){return arguments.length===1?Yl(t):new mt(t,e,n,r==null?1:r)}function mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}hr(mt,Yn,fs(De,{brighter:function(t){return t=t==null?Ye:Math.pow(Ye,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Ce:Math.pow(Ce,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Br,formatHex:Br,formatRgb:Rr,toString:Rr}));function Br(){return"#"+fn(this.r)+fn(this.g)+fn(this.b)}function Rr(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function fn(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Wr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tt(t,e,n,r)}function hs(t){if(t instanceof Tt)return new Tt(t.h,t.s,t.l,t.opacity);if(t instanceof De||(t=Zt(t)),!t)return new Tt;if(t instanceof Tt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Tt(a,o,l,t.opacity)}function Vl(t,e,n,r){return arguments.length===1?hs(t):new Tt(t,e,n,r==null?1:r)}function Tt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}hr(Tt,Vl,fs(De,{brighter:function(t){return t=t==null?Ye:Math.pow(Ye,t),new Tt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Ce:Math.pow(Ce,t),new Tt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mt(hn(t>=240?t-240:t+120,i,r),hn(t,i,r),hn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function hn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var dr=t=>()=>t;function Hl(t,e){return function(n){return t+n*e}}function Bl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rl(t){return(t=+t)==1?ds:function(e,n){return n-e?Bl(e,n,t):dr(isNaN(e)?n:e)}}function ds(t,e){var n=e-t;return n?Hl(t,n):dr(isNaN(t)?e:t)}var Ve=function t(e){var n=Rl(e);function r(i,s){var a=n((i=Yn(i)).r,(s=Yn(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),h=ds(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=h(u),i+""}}return r.gamma=t,r}(1);function Wl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ql(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Xl(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=pr(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Zl(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ql(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=pr(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(Vn.source,"g");function Gl(t){return function(){return t}}function Kl(t){return function(e){return t(e)+""}}function ps(t,e){var n=Vn.lastIndex=dn.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Vn.exec(t))&&(i=dn.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:bt(r,i)})),n=dn.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Kl(l[0].x):Gl(e):(e=l.length,function(h){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(h);return o.join("")})}function pr(t,e){var n=typeof e,r;return e==null||n==="boolean"?dr(e):(n==="number"?bt:n==="string"?(r=Zt(e))?(e=r,Ve):ps:e instanceof Zt?Ve:e instanceof Date?Zl:ql(e)?Wl:Array.isArray(e)?Xl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ql:bt)(t,e)}function Jl(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var qr=180/Math.PI,Hn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gs(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*qr,skewX:Math.atan(l)*qr,scaleX:a,scaleY:o}}var Ee;function jl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Hn:gs(e.a,e.b,e.c,e.d,e.e,e.f)}function tc(t){return t==null||(Ee||(Ee=document.createElementNS("http://www.w3.org/2000/svg","g")),Ee.setAttribute("transform",t),!(t=Ee.transform.baseVal.consolidate()))?Hn:(t=t.matrix,gs(t.a,t.b,t.c,t.d,t.e,t.f))}function ms(t,e,n,r){function i(h){return h.length?h.pop()+" ":""}function s(h,u,d,m,_,C){if(h!==d||u!==m){var c=_.push("translate(",null,e,null,n);C.push({i:c-4,x:bt(h,d)},{i:c-2,x:bt(u,m)})}else(d||m)&&_.push("translate("+d+e+m+n)}function a(h,u,d,m){h!==u?(h-u>180?u+=360:u-h>180&&(h+=360),m.push({i:d.push(i(d)+"rotate(",null,r)-2,x:bt(h,u)})):u&&d.push(i(d)+"rotate("+u+r)}function o(h,u,d,m){h!==u?m.push({i:d.push(i(d)+"skewX(",null,r)-2,x:bt(h,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(h,u,d,m,_,C){if(h!==d||u!==m){var c=_.push(i(_)+"scale(",null,",",null,")");C.push({i:c-4,x:bt(h,d)},{i:c-2,x:bt(u,m)})}else(d!==1||m!==1)&&_.push(i(_)+"scale("+d+","+m+")")}return function(h,u){var d=[],m=[];return h=t(h),u=t(u),s(h.translateX,h.translateY,u.translateX,u.translateY,d,m),a(h.rotate,u.rotate,d,m),o(h.skewX,u.skewX,d,m),l(h.scaleX,h.scaleY,u.scaleX,u.scaleY,d,m),h=u=null,function(_){for(var C=-1,c=m.length,f;++C<c;)d[(f=m[C]).i]=f.x(_);return d.join("")}}}var ec=ms(jl,"px, ","px)","deg)"),nc=ms(tc,", ",")",")");function rc(t){return function(){return t}}function ic(t){return+t}var Xr=[0,1];function ne(t){return t}function Bn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rc(isNaN(e)?NaN:.5)}function sc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ac(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Bn(i,r),s=n(a,s)):(r=Bn(r,i),s=n(s,a)),function(o){return s(r(o))}}function oc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Bn(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=ml(t,o,1,r)-1;return s[l](i[l](o))}}function vs(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lc(){var t=Xr,e=Xr,n=pr,r,i,s,a=ne,o,l,h;function u(){var m=Math.min(t.length,e.length);return a!==ne&&(a=sc(t[0],t[m-1])),o=m>2?oc:ac,l=h=null,d}function d(m){return m==null||isNaN(m=+m)?s:(l||(l=o(t.map(r),e,n)))(r(a(m)))}return d.invert=function(m){return a(i((h||(h=o(e,t.map(r),bt)))(m)))},d.domain=function(m){return arguments.length?(t=Array.from(m,ic),u()):t.slice()},d.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},d.rangeRound=function(m){return e=Array.from(m),n=Jl,u()},d.clamp=function(m){return arguments.length?(a=m?!0:ne,u()):a!==ne},d.interpolate=function(m){return arguments.length?(n=m,u()):n},d.unknown=function(m){return arguments.length?(s=m,d):s},function(m,_){return r=m,i=_,u()}}function ys(){return lc()(ne,ne)}function cc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function He(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function oe(t){return t=He(Math.abs(t)),t?t[1]:NaN}function uc(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function fc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Be(t){if(!(e=hc.exec(t)))throw new Error("invalid format: "+t);var e;return new gr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Be.prototype=gr.prototype;function gr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dc(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var xs;function pc(t,e){var n=He(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(xs=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+He(t,Math.max(0,e+s-1))[0]}function Zr(t,e){var n=He(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Qr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:cc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Zr(t*100,e),r:Zr,s:pc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Gr(t){return t}var Kr=Array.prototype.map,Jr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function gc(t){var e=t.grouping===void 0||t.thousands===void 0?Gr:uc(Kr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Gr:fc(Kr.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function h(d){d=Be(d);var m=d.fill,_=d.align,C=d.sign,c=d.symbol,f=d.zero,g=d.width,p=d.comma,v=d.precision,x=d.trim,w=d.type;w==="n"?(p=!0,w="g"):Qr[w]||(v===void 0&&(v=12),x=!0,w="g"),(f||m==="0"&&_==="=")&&(f=!0,m="0",_="=");var y=c==="$"?n:c==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b=c==="$"?r:/[%p]/.test(w)?a:"",S=Qr[w],T=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function k(M){var D=y,N=b,A,F,E;if(w==="c")N=S(M)+N,M="";else{M=+M;var $=M<0||1/M<0;if(M=isNaN(M)?l:S(Math.abs(M),v),x&&(M=dc(M)),$&&+M==0&&C!=="+"&&($=!1),D=($?C==="("?C:o:C==="-"||C==="("?"":C)+D,N=(w==="s"?Jr[8+xs/3]:"")+N+($&&C==="("?")":""),T){for(A=-1,F=M.length;++A<F;)if(E=M.charCodeAt(A),48>E||E>57){N=(E===46?i+M.slice(A+1):M.slice(A))+N,M=M.slice(0,A);break}}}p&&!f&&(M=e(M,1/0));var V=D.length+M.length+N.length,I=V<g?new Array(g-V+1).join(m):"";switch(p&&f&&(M=e(I+M,I.length?g-N.length:1/0),I=""),_){case"<":M=D+M+N+I;break;case"=":M=D+I+M+N;break;case"^":M=I.slice(0,V=I.length>>1)+D+M+N+I.slice(V);break;default:M=I+D+M+N;break}return s(M)}return k.toString=function(){return d+""},k}function u(d,m){var _=h((d=Be(d),d.type="f",d)),C=Math.max(-8,Math.min(8,Math.floor(oe(m)/3)))*3,c=Math.pow(10,-C),f=Jr[8+C/3];return function(g){return _(c*g)+f}}return{format:h,formatPrefix:u}}var Pe,_t,ws;bs({thousands:",",grouping:[3],currency:["$",""]});function bs(t){return Pe=gc(t),_t=Pe.format,ws=Pe.formatPrefix,Pe}function mc(t){return Math.max(0,-oe(Math.abs(t)))}function vc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oe(e)/3)))*3-oe(Math.abs(t)))}function yc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,oe(e)-oe(t))+1}function xc(t,e,n,r){var i=Nn(t,e,n),s;switch(r=Be(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=vc(i,a))&&(r.precision=s),ws(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=yc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=mc(i))&&(r.precision=s-(r.type==="%")*2);break}}return _t(r)}function wc(t){var e=t.domain;return t.ticks=function(n){var r=e();return Cl(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return xc(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,h,u=10;for(o<a&&(h=a,a=o,o=h,h=i,i=s,s=h);u-- >0;){if(h=es(a,o,n),h===l)return r[i]=a,r[s]=o,e(r);if(h>0)a=Math.floor(a/h)*h,o=Math.ceil(o/h)*h;else if(h<0)a=Math.ceil(a*h)/h,o=Math.floor(o*h)/h;else break;l=h}return t},t}function St(){var t=ys();return t.copy=function(){return vs(t,St())},en.apply(t,arguments),wc(t)}function bc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}const pn=new Date,gn=new Date;function nt(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let h;do l.push(h=new Date(+s)),e(s,o),t(s);while(h<s&&s<a);return l},i.filter=s=>nt(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(pn.setTime(+s),gn.setTime(+a),t(pn),t(gn),Math.floor(n(pn,gn))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Re=nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Re.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Re);Re.range;const Yt=1e3,yt=Yt*60,Vt=yt*60,Bt=Vt*24,mr=Bt*7,jr=Bt*30,mn=Bt*365,re=nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Yt)},(t,e)=>(e-t)/Yt,t=>t.getUTCSeconds());re.range;const vr=nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yt)},(t,e)=>{t.setTime(+t+e*yt)},(t,e)=>(e-t)/yt,t=>t.getMinutes());vr.range;const Cs=nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*yt)},(t,e)=>(e-t)/yt,t=>t.getUTCMinutes());Cs.range;const yr=nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yt-t.getMinutes()*yt)},(t,e)=>{t.setTime(+t+e*Vt)},(t,e)=>(e-t)/Vt,t=>t.getHours());yr.range;const _s=nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Vt)},(t,e)=>(e-t)/Vt,t=>t.getUTCHours());_s.range;const xr=nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yt)/Bt,t=>t.getDate()-1);xr.range;const Cc=nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bt,t=>t.getUTCDate()-1);Cc.range;const Ss=nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bt,t=>Math.floor(t/Bt));Ss.range;function Gt(t){return nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*yt)/mr)}const wr=Gt(0),_c=Gt(1),Sc=Gt(2),Mc=Gt(3),Tc=Gt(4),kc=Gt(5),Lc=Gt(6);wr.range;_c.range;Sc.range;Mc.range;Tc.range;kc.range;Lc.range;function Kt(t){return nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/mr)}const Ms=Kt(0),Ac=Kt(1),Dc=Kt(2),$c=Kt(3),Oc=Kt(4),Ec=Kt(5),Pc=Kt(6);Ms.range;Ac.range;Dc.range;$c.range;Oc.range;Ec.range;Pc.range;const br=nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());br.range;const Ts=nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ts.range;const rn=nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());rn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});rn.range;const Cr=nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Cr.range;function ks(t,e,n,r,i,s){const a=[[re,1,Yt],[re,5,5*Yt],[re,15,15*Yt],[re,30,30*Yt],[s,1,yt],[s,5,5*yt],[s,15,15*yt],[s,30,30*yt],[i,1,Vt],[i,3,3*Vt],[i,6,6*Vt],[i,12,12*Vt],[r,1,Bt],[r,2,2*Bt],[n,1,mr],[e,1,jr],[e,3,3*jr],[t,1,mn]];function o(h,u,d){const m=u<h;m&&([h,u]=[u,h]);const _=d&&typeof d.range=="function"?d:l(h,u,d),C=_?_.range(h,+u+1):[];return m?C.reverse():C}function l(h,u,d){const m=Math.abs(u-h)/d,_=Le(([,,f])=>f).right(a,m);if(_===a.length)return t.every(Nn(h/mn,u/mn,d));if(_===0)return Re.every(Math.max(Nn(h,u,d),1));const[C,c]=a[m/a[_-1][2]<a[_][2]/m?_-1:_];return C.every(c)}return[o,l]}ks(Cr,Ts,Ms,Ss,_s,Cs);const[Nc,Fc]=ks(rn,br,wr,xr,yr,vr);var vn=new Date,yn=new Date;function Wt(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return e(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,o){var l=[],h;if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;do l.push(h=new Date(+s)),e(s,o),t(s);while(h<s&&s<a);return l},i.filter=function(s){return Wt(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););})},n&&(i.count=function(s,a){return vn.setTime(+s),yn.setTime(+a),t(vn),t(yn),Math.floor(n(vn,yn))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(a){return r(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var Ls=6e4,As=864e5,Ds=6048e5,$s=Wt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ls)/As,t=>t.getDate()-1),Os=$s;$s.range;function Jt(t){return Wt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ls)/Ds})}var Es=Jt(0),We=Jt(1),Uc=Jt(2),zc=Jt(3),le=Jt(4),Ic=Jt(5),Yc=Jt(6);Es.range;We.range;Uc.range;zc.range;le.range;Ic.range;Yc.range;var _r=Wt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});_r.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Wt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};var Se=_r;_r.range;var Ps=Wt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/As},function(t){return t.getUTCDate()-1}),Ns=Ps;Ps.range;function jt(t){return Wt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Ds})}var Fs=jt(0),qe=jt(1),Vc=jt(2),Hc=jt(3),ce=jt(4),Bc=jt(5),Rc=jt(6);Fs.range;qe.range;Vc.range;Hc.range;ce.range;Bc.range;Rc.range;var Sr=Wt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Sr.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Wt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};var Me=Sr;Sr.range;function xn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function de(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Wc(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,h=pe(i),u=ge(i),d=pe(s),m=ge(s),_=pe(a),C=ge(a),c=pe(o),f=ge(o),g=pe(l),p=ge(l),v={a:$,A:V,b:I,B:j,c:null,d:si,e:si,f:pu,g:Su,G:Tu,H:fu,I:hu,j:du,L:Us,m:gu,M:mu,p:dt,q:ct,Q:li,s:ci,S:vu,u:yu,U:xu,V:wu,w:bu,W:Cu,x:null,X:null,y:_u,Y:Mu,Z:ku,"%":oi},x={a:at,A:H,b:Z,B:xt,c:null,d:ai,e:ai,f:$u,g:Vu,G:Bu,H:Lu,I:Au,j:Du,L:Is,m:Ou,M:Eu,p:q,q:pt,Q:li,s:ci,S:Pu,u:Nu,U:Fu,V:Uu,w:zu,W:Iu,x:null,X:null,y:Yu,Y:Hu,Z:Ru,"%":oi},w={a:k,A:M,b:D,B:N,c:A,d:ri,e:ri,f:ou,g:ni,G:ei,H:ii,I:ii,j:ru,L:au,m:nu,M:iu,p:T,q:eu,Q:cu,s:uu,S:su,u:Gc,U:Kc,V:Jc,w:Qc,W:jc,x:F,X:E,y:ni,Y:ei,Z:tu,"%":lu};v.x=y(n,v),v.X=y(r,v),v.c=y(e,v),x.x=y(n,x),x.X=y(r,x),x.c=y(e,x);function y(O,U){return function(z){var L=[],it=-1,R=0,st=O.length,ot,zt,he;for(z instanceof Date||(z=new Date(+z));++it<st;)O.charCodeAt(it)===37&&(L.push(O.slice(R,it)),(zt=ti[ot=O.charAt(++it)])!=null?ot=O.charAt(++it):zt=ot==="e"?" ":"0",(he=U[ot])&&(ot=he(z,zt)),L.push(ot),R=it+1);return L.push(O.slice(R,it)),L.join("")}}function b(O,U){return function(z){var L=de(1900,void 0,1),it=S(L,O,z+="",0),R,st;if(it!=z.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(U&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(R=wn(de(L.y,0,1)),st=R.getUTCDay(),R=st>4||st===0?qe.ceil(R):qe(R),R=Ns.offset(R,(L.V-1)*7),L.y=R.getUTCFullYear(),L.m=R.getUTCMonth(),L.d=R.getUTCDate()+(L.w+6)%7):(R=xn(de(L.y,0,1)),st=R.getDay(),R=st>4||st===0?We.ceil(R):We(R),R=Os.offset(R,(L.V-1)*7),L.y=R.getFullYear(),L.m=R.getMonth(),L.d=R.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),st="Z"in L?wn(de(L.y,0,1)).getUTCDay():xn(de(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(st+5)%7:L.w+L.U*7-(st+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,wn(L)):xn(L)}}function S(O,U,z,L){for(var it=0,R=U.length,st=z.length,ot,zt;it<R;){if(L>=st)return-1;if(ot=U.charCodeAt(it++),ot===37){if(ot=U.charAt(it++),zt=w[ot in ti?U.charAt(it++):ot],!zt||(L=zt(O,z,L))<0)return-1}else if(ot!=z.charCodeAt(L++))return-1}return L}function T(O,U,z){var L=h.exec(U.slice(z));return L?(O.p=u.get(L[0].toLowerCase()),z+L[0].length):-1}function k(O,U,z){var L=_.exec(U.slice(z));return L?(O.w=C.get(L[0].toLowerCase()),z+L[0].length):-1}function M(O,U,z){var L=d.exec(U.slice(z));return L?(O.w=m.get(L[0].toLowerCase()),z+L[0].length):-1}function D(O,U,z){var L=g.exec(U.slice(z));return L?(O.m=p.get(L[0].toLowerCase()),z+L[0].length):-1}function N(O,U,z){var L=c.exec(U.slice(z));return L?(O.m=f.get(L[0].toLowerCase()),z+L[0].length):-1}function A(O,U,z){return S(O,e,U,z)}function F(O,U,z){return S(O,n,U,z)}function E(O,U,z){return S(O,r,U,z)}function $(O){return a[O.getDay()]}function V(O){return s[O.getDay()]}function I(O){return l[O.getMonth()]}function j(O){return o[O.getMonth()]}function dt(O){return i[+(O.getHours()>=12)]}function ct(O){return 1+~~(O.getMonth()/3)}function at(O){return a[O.getUTCDay()]}function H(O){return s[O.getUTCDay()]}function Z(O){return l[O.getUTCMonth()]}function xt(O){return o[O.getUTCMonth()]}function q(O){return i[+(O.getUTCHours()>=12)]}function pt(O){return 1+~~(O.getUTCMonth()/3)}return{format:function(O){var U=y(O+="",v);return U.toString=function(){return O},U},parse:function(O){var U=b(O+="",!1);return U.toString=function(){return O},U},utcFormat:function(O){var U=y(O+="",x);return U.toString=function(){return O},U},utcParse:function(O){var U=b(O+="",!0);return U.toString=function(){return O},U}}}var ti={"-":"",_:" ",0:"0"},rt=/^\s*\d+/,qc=/^%/,Xc=/[\\^$*+?|[\]().{}]/g;function B(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Zc(t){return t.replace(Xc,"\\$&")}function pe(t){return new RegExp("^(?:"+t.map(Zc).join("|")+")","i")}function ge(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Qc(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Gc(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Kc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Jc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function jc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ei(t,e,n){var r=rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ni(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function tu(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function eu(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function nu(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ri(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ru(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ii(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function iu(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function su(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function au(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ou(t,e,n){var r=rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lu(t,e,n){var r=qc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function cu(t,e,n){var r=rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function uu(t,e,n){var r=rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function si(t,e){return B(t.getDate(),e,2)}function fu(t,e){return B(t.getHours(),e,2)}function hu(t,e){return B(t.getHours()%12||12,e,2)}function du(t,e){return B(1+Os.count(Se(t),t),e,3)}function Us(t,e){return B(t.getMilliseconds(),e,3)}function pu(t,e){return Us(t,e)+"000"}function gu(t,e){return B(t.getMonth()+1,e,2)}function mu(t,e){return B(t.getMinutes(),e,2)}function vu(t,e){return B(t.getSeconds(),e,2)}function yu(t){var e=t.getDay();return e===0?7:e}function xu(t,e){return B(Es.count(Se(t)-1,t),e,2)}function zs(t){var e=t.getDay();return e>=4||e===0?le(t):le.ceil(t)}function wu(t,e){return t=zs(t),B(le.count(Se(t),t)+(Se(t).getDay()===4),e,2)}function bu(t){return t.getDay()}function Cu(t,e){return B(We.count(Se(t)-1,t),e,2)}function _u(t,e){return B(t.getFullYear()%100,e,2)}function Su(t,e){return t=zs(t),B(t.getFullYear()%100,e,2)}function Mu(t,e){return B(t.getFullYear()%1e4,e,4)}function Tu(t,e){var n=t.getDay();return t=n>=4||n===0?le(t):le.ceil(t),B(t.getFullYear()%1e4,e,4)}function ku(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+B(e/60|0,"0",2)+B(e%60,"0",2)}function ai(t,e){return B(t.getUTCDate(),e,2)}function Lu(t,e){return B(t.getUTCHours(),e,2)}function Au(t,e){return B(t.getUTCHours()%12||12,e,2)}function Du(t,e){return B(1+Ns.count(Me(t),t),e,3)}function Is(t,e){return B(t.getUTCMilliseconds(),e,3)}function $u(t,e){return Is(t,e)+"000"}function Ou(t,e){return B(t.getUTCMonth()+1,e,2)}function Eu(t,e){return B(t.getUTCMinutes(),e,2)}function Pu(t,e){return B(t.getUTCSeconds(),e,2)}function Nu(t){var e=t.getUTCDay();return e===0?7:e}function Fu(t,e){return B(Fs.count(Me(t)-1,t),e,2)}function Ys(t){var e=t.getUTCDay();return e>=4||e===0?ce(t):ce.ceil(t)}function Uu(t,e){return t=Ys(t),B(ce.count(Me(t),t)+(Me(t).getUTCDay()===4),e,2)}function zu(t){return t.getUTCDay()}function Iu(t,e){return B(qe.count(Me(t)-1,t),e,2)}function Yu(t,e){return B(t.getUTCFullYear()%100,e,2)}function Vu(t,e){return t=Ys(t),B(t.getUTCFullYear()%100,e,2)}function Hu(t,e){return B(t.getUTCFullYear()%1e4,e,4)}function Bu(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ce(t):ce.ceil(t),B(t.getUTCFullYear()%1e4,e,4)}function Ru(){return"+0000"}function oi(){return"%"}function li(t){return+t}function ci(t){return Math.floor(+t/1e3)}var ee,Vs;Wu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wu(t){return ee=Wc(t),Vs=ee.format,ee.parse,ee.utcFormat,ee.utcParse,ee}function qu(t){return new Date(t)}function Xu(t){return t instanceof Date?+t:+new Date(+t)}function Hs(t,e,n,r,i,s,a,o,l,h){var u=ys(),d=u.invert,m=u.domain,_=h(".%L"),C=h(":%S"),c=h("%I:%M"),f=h("%I %p"),g=h("%a %d"),p=h("%b %d"),v=h("%B"),x=h("%Y");function w(y){return(l(y)<y?_:o(y)<y?C:a(y)<y?c:s(y)<y?f:r(y)<y?i(y)<y?g:p:n(y)<y?v:x)(y)}return u.invert=function(y){return new Date(d(y))},u.domain=function(y){return arguments.length?m(Array.from(y,Xu)):m().map(qu)},u.ticks=function(y){var b=m();return t(b[0],b[b.length-1],y==null?10:y)},u.tickFormat=function(y,b){return b==null?w:h(b)},u.nice=function(y){var b=m();return(!y||typeof y.range!="function")&&(y=e(b[0],b[b.length-1],y==null?10:y)),y?m(bc(b,y)):u},u.copy=function(){return vs(u,Hs(t,e,n,r,i,s,a,o,l,h))},u}function fe(){return en.apply(Hs(Nc,Fc,rn,br,wr,xr,yr,vr,re,Vs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var bn=Array.prototype.slice;function Zu(t){return t}var Cn=1,_n=2,Rn=3,ye=4,ui=1e-6;function Qu(t){return"translate("+(t+.5)+",0)"}function Gu(t){return"translate(0,"+(t+.5)+")"}function Ku(t){return e=>+t(e)}function Ju(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function ju(){return!this.__axis}function Bs(t,e){var n=[],r=null,i=null,s=6,a=6,o=3,l=t===Cn||t===ye?-1:1,h=t===ye||t===_n?"x":"y",u=t===Cn||t===Rn?Qu:Gu;function d(m){var _=r==null?e.ticks?e.ticks.apply(e,n):e.domain():r,C=i==null?e.tickFormat?e.tickFormat.apply(e,n):Zu:i,c=Math.max(s,0)+o,f=e.range(),g=+f[0]+.5,p=+f[f.length-1]+.5,v=(e.bandwidth?Ju:Ku)(e.copy()),x=m.selection?m.selection():m,w=x.selectAll(".domain").data([null]),y=x.selectAll(".tick").data(_,e).order(),b=y.exit(),S=y.enter().append("g").attr("class","tick"),T=y.select("line"),k=y.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),y=y.merge(S),T=T.merge(S.append("line").attr("stroke","currentColor").attr(h+"2",l*s)),k=k.merge(S.append("text").attr("fill","currentColor").attr(h,l*c).attr("dy",t===Cn?"0em":t===Rn?"0.71em":"0.32em")),m!==x&&(w=w.transition(m),y=y.transition(m),T=T.transition(m),k=k.transition(m),b=b.transition(m).attr("opacity",ui).attr("transform",function(M){return isFinite(M=v(M))?u(M):this.getAttribute("transform")}),S.attr("opacity",ui).attr("transform",function(M){var D=this.parentNode.__axis;return u(D&&isFinite(D=D(M))?D:v(M))})),b.remove(),w.attr("d",t===ye||t==_n?a?"M"+l*a+","+g+"H0.5V"+p+"H"+l*a:"M0.5,"+g+"V"+p:a?"M"+g+","+l*a+"V0.5H"+p+"V"+l*a:"M"+g+",0.5H"+p),y.attr("opacity",1).attr("transform",function(M){return u(v(M))}),T.attr(h+"2",l*s),k.attr(h,l*c).text(C),x.filter(ju).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===_n?"start":t===ye?"end":"middle"),x.each(function(){this.__axis=v})}return d.scale=function(m){return arguments.length?(e=m,d):e},d.ticks=function(){return n=bn.call(arguments),d},d.tickArguments=function(m){return arguments.length?(n=m==null?[]:bn.call(m),d):n.slice()},d.tickValues=function(m){return arguments.length?(r=m==null?null:bn.call(m),d):r&&r.slice()},d.tickFormat=function(m){return arguments.length?(i=m,d):i},d.tickSize=function(m){return arguments.length?(s=a=+m,d):s},d.tickSizeInner=function(m){return arguments.length?(s=+m,d):s},d.tickSizeOuter=function(m){return arguments.length?(a=+m,d):a},d.tickPadding=function(m){return arguments.length?(o=+m,d):o},d}function Pt(t){return Bs(Rn,t)}function Nt(t){return Bs(ye,t)}var fi={},Sn={},Mn=34,me=10,Tn=13;function Rs(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function tf(t,e){var n=Rs(t);return function(r,i){return e(n(r),i,t)}}function hi(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function ht(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ef(t){return t<0?"-"+ht(-t,6):t>9999?"+"+ht(t,6):ht(t,4)}function nf(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ef(t.getUTCFullYear())+"-"+ht(t.getUTCMonth()+1,2)+"-"+ht(t.getUTCDate(),2)+(i?"T"+ht(e,2)+":"+ht(n,2)+":"+ht(r,2)+"."+ht(i,3)+"Z":r?"T"+ht(e,2)+":"+ht(n,2)+":"+ht(r,2)+"Z":n||e?"T"+ht(e,2)+":"+ht(n,2)+"Z":"")}function rf(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(d,m){var _,C,c=i(d,function(f,g){if(_)return _(f,g-1);C=f,_=m?tf(f,m):Rs(f)});return c.columns=C||[],c}function i(d,m){var _=[],C=d.length,c=0,f=0,g,p=C<=0,v=!1;d.charCodeAt(C-1)===me&&--C,d.charCodeAt(C-1)===Tn&&--C;function x(){if(p)return Sn;if(v)return v=!1,fi;var y,b=c,S;if(d.charCodeAt(b)===Mn){for(;c++<C&&d.charCodeAt(c)!==Mn||d.charCodeAt(++c)===Mn;);return(y=c)>=C?p=!0:(S=d.charCodeAt(c++))===me?v=!0:S===Tn&&(v=!0,d.charCodeAt(c)===me&&++c),d.slice(b+1,y-1).replace(/""/g,'"')}for(;c<C;){if((S=d.charCodeAt(y=c++))===me)v=!0;else if(S===Tn)v=!0,d.charCodeAt(c)===me&&++c;else if(S!==n)continue;return d.slice(b,y)}return p=!0,d.slice(b,C)}for(;(g=x())!==Sn;){for(var w=[];g!==fi&&g!==Sn;)w.push(g),g=x();m&&(w=m(w,f++))==null||_.push(w)}return _}function s(d,m){return d.map(function(_){return m.map(function(C){return u(_[C])}).join(t)})}function a(d,m){return m==null&&(m=hi(d)),[m.map(u).join(t)].concat(s(d,m)).join(`
`)}function o(d,m){return m==null&&(m=hi(d)),s(d,m).join(`
`)}function l(d){return d.map(h).join(`
`)}function h(d){return d.map(u).join(t)}function u(d){return d==null?"":d instanceof Date?nf(d):e.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:a,formatBody:o,formatRows:l,formatRow:h,formatValue:u}}var sf=rf(","),af=sf.parse;function of(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function lf(t,e){return fetch(t,e).then(of)}function cf(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),lf(e,n).then(function(i){return t(i,r)})}}var Ft=cf(af);const ut={select:Dt,selectAll:$t,min:Et,max:Ot,bisector:Le,extent:cr,curveCardinal:Tl,area:as,stack:ls,stackOrderInsideOut:cs,scaleTime:fe,scaleLinear:St,scaleOrdinal:nn,axisBottom:Pt,axisLeft:Nt,csv:Ft,format:_t};function uf(){const t={top:24,right:8,bottom:24,left:32};let e=0,n=0;const r=ut.select(".aragon-stack"),i=r.select("svg"),s={};let a;const o=ut.bisector(f=>f.year).left,l=r.append("div").attr("class","tooltip tooltip-stack").style("opacity",0);function h(){const f=ut.scaleTime().domain(ut.extent(a,p=>p.year)),g=ut.scaleLinear().domain([0,100]);s.count={x:f,y:g}}function u(){const f=i.select(".aragon-stack-container");f.append("g").attr("class","axis axis-x"),f.append("g").attr("class","axis axis-y"),f.append("g").attr("class","aragon-stack-container-bis"),f.append("text").attr("class","legend-aragon").attr("y","70%").attr("x","1%").text("Zaragoza"),f.append("text").attr("class","legend-aragon").attr("y","5%").attr("x","1%").text("Huesca"),f.append("text").attr("class","legend-aragon").attr("y","30%").attr("x","1%").text("Teruel")}function d(f,g){const{count:{x:p,y:v}}=s;p.range([0,f]),v.range([g,0])}function m(f){const{count:{x:g,y:p}}=s,v=ut.axisBottom(g).tickFormat(ut.format("d")).tickPadding(7).ticks(9);f.select(".axis-x").attr("transform",`translate(0,${n})`).call(v);const x=ut.axisLeft(p).tickFormat(w=>w+"%").tickSizeInner(-e).ticks(12);f.select(".axis-y").call(x)}function _(f){const g=r.node().offsetWidth,p=600,{left:v,right:x,top:w,bottom:y}=t;e=g-v-x,n=p-w-y,i.attr("width",g).attr("height",p);const b=i.select(".aragon-stack-container");b.attr("transform",`translate(${v},${w})`),b.append("rect").attr("class","overlay-dos"),b.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0);const S=f.columns.slice(5),T=ut.area().x($=>s.count.x($.data.year)).y0($=>s.count.y($[0])).y1($=>s.count.y($[1])).curve(ut.curveCardinal.tension(.6)),M=ut.stack().keys(S).order(ut.stackOrderInsideOut)(f),D=ut.scaleOrdinal().domain(S).range(["#F67460","#C54073","#5A1C7C"]);d(e,n),r.select(".aragon-stack-container-bis").selectAll(".area-stack").data(M).join("path").attr("fill",$=>D($.key)).attr("d",T).attr("class","area-stack");const A=b.select(".focus"),F=b.select(".overlay-dos");A.select(".x-hover-line").attr("y2",n),F.attr("width",e+v+x).attr("height",n).on("mouseover",function(){A.style("display",null)}).on("mouseout",function(){A.style("display","none"),l.style("opacity",0)}).on("mousemove",E);function E($){const{layerX:V}=$,I=r.node().offsetWidth;var j=s.count.x.invert(V),dt=o(f,j,1),ct=f[dt-1],at=f[dt],H=j-ct.year>at.year-j?at:ct;const Z=s.count.x(H.year)+t.left,xt=Z+200,q=I-Z;l.style("opacity",1).html(`
          <span class="tooltip-stack-number tooltip-stack-text">${H.year}</span>
          <span class="tooltip-stack-text">Huesca: <span class="tooltip-number">${H.huescaP}% - ${H.huesca} hab.</span></span>
          <span class="tooltip-stack-text">Teruel: <span class="tooltip-number">${H.teruelP}% - ${H.teruel} hab.</span></span>
          <span class="tooltip-stack-text">Zaragoza: <span class="tooltip-number">${H.zaragozaP}% - ${H.zaragoza} hab.</span></span>
          <span class="tooltip-stack-text">Total: <span class="tooltip-number">${H.aragon} hab.</span></span>
          `).style("top","35%").style("left",xt>I?"auto":`${Z}px`).style("right",xt>I?q+"px":"auto"),A.select(".x-hover-line").attr("transform",`translate(${s.count.x(H.year)},0)`)}m(b)}function C(){_(a)}function c(){ut.csv("data/aragon-total.csv").then(f=>{a=f,u(),h(),_(a)})}window.addEventListener("resize",C),c()}const $e=t=>+t;function ff(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function hf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var df={value:()=>{}};function Ws(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ne(n)}function Ne(t){this._=t}function pf(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ne.prototype=Ws.prototype={constructor:Ne,on:function(t,e){var n=this._,r=pf(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=gf(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=di(n[i],t.name,e);else if(e==null)for(i in n)n[i]=di(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ne(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function gf(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function di(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=df,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ue=0,xe=0,ve=0,qs=1e3,Xe,we,Ze=0,Qt=0,sn=0,Te=typeof performance=="object"&&performance.now?performance:Date,Xs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mr(){return Qt||(Xs(mf),Qt=Te.now()+sn)}function mf(){Qt=0}function Qe(){this._call=this._time=this._next=null}Qe.prototype=Zs.prototype={constructor:Qe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Mr():+n)+(e==null?0:+e),!this._next&&we!==this&&(we?we._next=this:Xe=this,we=this),this._call=t,this._time=n,Wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wn())}};function Zs(t,e,n){var r=new Qe;return r.restart(t,e,n),r}function vf(){Mr(),++ue;for(var t=Xe,e;t;)(e=Qt-t._time)>=0&&t._call.call(null,e),t=t._next;--ue}function pi(){Qt=(Ze=Te.now())+sn,ue=xe=0;try{vf()}finally{ue=0,xf(),Qt=0}}function yf(){var t=Te.now(),e=t-Ze;e>qs&&(sn-=e,Ze=t)}function xf(){for(var t,e=Xe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xe=n);we=t,Wn(r)}function Wn(t){if(!ue){xe&&(xe=clearTimeout(xe));var e=t-Qt;e>24?(t<1/0&&(xe=setTimeout(pi,t-Te.now()-sn)),ve&&(ve=clearInterval(ve))):(ve||(Ze=Te.now(),ve=setInterval(yf,qs)),ue=1,Xs(pi))}}function gi(t,e,n){var r=new Qe;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var wf=Ws("start","end","cancel","interrupt"),bf=[],Qs=0,mi=1,qn=2,Fe=3,vi=4,Xn=5,Ue=6;function an(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Cf(t,n,{name:e,index:r,group:i,on:wf,tween:bf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Qs})}function Tr(t,e){var n=Mt(t,e);if(n.state>Qs)throw new Error("too late; already scheduled");return n}function Ut(t,e){var n=Mt(t,e);if(n.state>Fe)throw new Error("too late; already running");return n}function Mt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Cf(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Zs(s,0,n.time);function s(h){n.state=mi,n.timer.restart(a,n.delay,n.time),n.delay<=h&&a(h-n.delay)}function a(h){var u,d,m,_;if(n.state!==mi)return l();for(u in r)if(_=r[u],_.name===n.name){if(_.state===Fe)return gi(a);_.state===vi?(_.state=Ue,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[u]):+u<e&&(_.state=Ue,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[u])}if(gi(function(){n.state===Fe&&(n.state=vi,n.timer.restart(o,n.delay,n.time),o(h))}),n.state=qn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qn){for(n.state=Fe,i=new Array(m=n.tween.length),u=0,d=-1;u<m;++u)(_=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=_);i.length=d+1}}function o(h){for(var u=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(l),n.state=Xn,1),d=-1,m=i.length;++d<m;)i[d].call(t,u);n.state===Xn&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Ue,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function _f(t,e){var n=t.__transition,r,i,s=!0,a;if(!!n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>qn&&r.state<Xn,r.state=Ue,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Sf(t){return this.each(function(){_f(this,t)})}function Mf(t,e){var n,r;return function(){var i=Ut(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Tf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ut(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,h=i.length;l<h;++l)if(i[l].name===e){i[l]=o;break}l===h&&i.push(o)}s.tween=i}}function kf(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Mt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Mf:Tf)(n,t,e))}function kr(t,e,n){var r=t._id;return t.each(function(){var i=Ut(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Mt(i,r).value[e]}}function Gs(t,e){var n;return(typeof e=="number"?bt:e instanceof Zt?Ve:(n=Zt(e))?(e=n,Ve):ps)(t,e)}function Lf(t){return function(){this.removeAttribute(t)}}function Af(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Df(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function $f(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Of(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function Ef(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function Pf(t,e){var n=tn(t),r=n==="transform"?nc:Gs;return this.attrTween(t,typeof e=="function"?(n.local?Ef:Of)(n,r,kr(this,"attr."+t,e)):e==null?(n.local?Af:Lf)(n):(n.local?$f:Df)(n,r,e))}function Nf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ff(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Uf(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Ff(t,s)),n}return i._value=e,i}function zf(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Nf(t,s)),n}return i._value=e,i}function If(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=tn(t);return this.tween(n,(r.local?Uf:zf)(r,e))}function Yf(t,e){return function(){Tr(this,t).delay=+e.apply(this,arguments)}}function Vf(t,e){return e=+e,function(){Tr(this,t).delay=e}}function Hf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Yf:Vf)(e,t)):Mt(this.node(),e).delay}function Bf(t,e){return function(){Ut(this,t).duration=+e.apply(this,arguments)}}function Rf(t,e){return e=+e,function(){Ut(this,t).duration=e}}function Wf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Bf:Rf)(e,t)):Mt(this.node(),e).duration}function qf(t,e){if(typeof e!="function")throw new Error;return function(){Ut(this,t).ease=e}}function Xf(t){var e=this._id;return arguments.length?this.each(qf(e,t)):Mt(this.node(),e).ease}function Zf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ut(this,t).ease=n}}function Qf(t){if(typeof t!="function")throw new Error;return this.each(Zf(this._id,t))}function Gf(t){typeof t!="function"&&(t=Bi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,h=0;h<a;++h)(l=s[h])&&t.call(l,l.__data__,h,s)&&o.push(l);return new Rt(r,this._parents,this._name,this._id)}function Kf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],h=n[o],u=l.length,d=a[o]=new Array(u),m,_=0;_<u;++_)(m=l[_]||h[_])&&(d[_]=m);for(;o<r;++o)a[o]=e[o];return new Rt(a,this._parents,this._name,this._id)}function Jf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function jf(t,e,n){var r,i,s=Jf(e)?Tr:Ut;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function th(t,e){var n=this._id;return arguments.length<2?Mt(this.node(),n).on.on(t):this.each(jf(n,t,e))}function eh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function nh(){return this.on("end.remove",eh(this._id))}function rh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sr(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,h=s[a]=new Array(l),u,d,m=0;m<l;++m)(u=o[m])&&(d=t.call(u,u.__data__,m,o))&&("__data__"in u&&(d.__data__=u.__data__),h[m]=d,an(h[m],e,n,m,h,Mt(u,n)));return new Rt(s,this._parents,e,n)}function ih(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Hi(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],h=l.length,u,d=0;d<h;++d)if(u=l[d]){for(var m=t.call(u,u.__data__,d,l),_,C=Mt(u,n),c=0,f=m.length;c<f;++c)(_=m[c])&&an(_,e,n,c,m,C);s.push(m),a.push(u)}return new Rt(s,a,e,n)}var sh=ke.prototype.constructor;function ah(){return new sh(this._groups,this._parents)}function oh(t,e){var n,r,i;return function(){var s=ae(this,t),a=(this.style.removeProperty(t),ae(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Ks(t){return function(){this.style.removeProperty(t)}}function lh(t,e,n){var r,i=n+"",s;return function(){var a=ae(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function ch(t,e,n){var r,i,s;return function(){var a=ae(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),ae(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function uh(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=Ut(this,t),h=l.on,u=l.value[s]==null?o||(o=Ks(e)):void 0;(h!==n||i!==u)&&(r=(n=h).copy()).on(a,i=u),l.on=r}}function fh(t,e,n){var r=(t+="")=="transform"?ec:Gs;return e==null?this.styleTween(t,oh(t,r)).on("end.style."+t,Ks(t)):typeof e=="function"?this.styleTween(t,ch(t,r,kr(this,"style."+t,e))).each(uh(this._id,t)):this.styleTween(t,lh(t,r,e),n).on("end.style."+t,null)}function hh(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function dh(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&hh(t,a,n)),r}return s._value=e,s}function ph(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,dh(t,e,n==null?"":n))}function gh(t){return function(){this.textContent=t}}function mh(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function vh(t){return this.tween("text",typeof t=="function"?mh(kr(this,"text",t)):gh(t==null?"":t+""))}function yh(t){return function(e){this.textContent=t.call(this,e)}}function xh(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&yh(i)),e}return r._value=t,r}function wh(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,xh(t))}function bh(){for(var t=this._name,e=this._id,n=Js(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,h=0;h<o;++h)if(l=a[h]){var u=Mt(l,e);an(l,t,n,h,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Rt(r,this._parents,t,n)}function Ch(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var h=Ut(this,r),u=h.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),h.on=e}),i===0&&s()})}var _h=0;function Rt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Js(){return++_h}var It=ke.prototype;Rt.prototype={constructor:Rt,select:rh,selectAll:ih,selectChild:It.selectChild,selectChildren:It.selectChildren,filter:Gf,merge:Kf,selection:ah,transition:bh,call:It.call,nodes:It.nodes,node:It.node,size:It.size,empty:It.empty,each:It.each,on:th,attr:Pf,attrTween:If,style:fh,styleTween:ph,text:vh,textTween:wh,remove:nh,tween:kf,delay:Hf,duration:Wf,ease:Xf,easeVarying:Qf,end:Ch,[Symbol.iterator]:It[Symbol.iterator]};var Sh={time:null,delay:0,duration:250,ease:hf};function Mh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Th(t){var e,n;t instanceof Rt?(e=t._id,t=t._name):(e=Js(),(n=Sh).time=Mr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,h=0;h<o;++h)(l=a[h])&&an(l,t,e,h,a,n||Mh(l,e));return new Rt(r,this._parents,t,e)}ke.prototype.interrupt=Sf;ke.prototype.transition=Th;const Y={select:Dt,selectAll:$t,min:Et,max:Ot,extent:cr,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,easeQuad:ff};function kh(t,e){let n=0,r=0,i=0,s=0,a;const o={top:0,right:8,bottom:64,left:40},l=Y.select(`.scatter-${e}`),h=l.select("svg"),u={},d="%",m=l.append("div").attr("class","tooltip tooltip-under-over").attr("id","tooltip-scatter").style("opacity",0);function _(){const T=Y.scaleLinear().domain([0,75]),k=Y.scaleLinear().domain([0,Y.max(a,M=>M.menor*1.75)]);u.count={x:T,y:k}}function C(){const T=h.select(`.scatter-${e}-container`);T.append("g").attr("class","axis axis-x"),T.append("g").attr("class","axis axis-y"),T.append("g").attr("class",`scatter-${e}-container-bis`),T.append("text").attr("class","legend").attr("y","97%").attr("x","35%").style("text-anchor","start").text("Mayores de 65 a\xF1os"),T.append("text").attr("class","legend").attr("x","-350").attr("y","-30").attr("transform","rotate(-90)").style("text-anchor","start").text("Menores de 18 a\xF1os")}function c(T,k){const{count:{x:M,y:D}}=u;M.range([0,T]),D.range([k,20])}function f(T){const k=Y.axisBottom(u.count.x).tickFormat(D=>D+d).tickPadding(11).ticks(10);T.select(".axis-x").attr("transform",`translate(0,${r})`).call(k);const M=Y.axisLeft(u.count.y).tickFormat(D=>D+d).tickSize(-n).ticks(5);T.select(".axis-y").call(M)}function g(T){i=l.node().offsetWidth,s=600;const{left:k,right:M,top:D,bottom:N}=o;n=i-k-M,r=s-D-N,h.attr("width",i).attr("height",s);const A=h.select(`.scatter-${e}-container`);A.attr("transform",`translate(${k},${D})`),c(n,r),l.select(`.scatter-${e}-container-bis`).selectAll(".scatter-circles").data(T).join(E=>E.append("circle").attr("cx",$=>u.count.x($.mayor)).attr("cy",$=>u.count.y($.menor)).attr("r",0),E=>E.attr("r",6),E=>E.attr("cx",$=>u.count.x($.mayor)).attr("cy",$=>u.count.y($.menor)).attr("r",0)).attr("class",`scatter-${e}-circles scatter-circles`).on("mouseover",function(E,$){m.transition(),m.style("opacity",1).html(`<p class="tooltip-citi">${$.city}<p/>
            <p class="tooltip-population-text">Habitantes: <span class="tooltip-number">${$.population}</span><p/>
            <p class="tooltip-over">Mayores de 65: <span class="tooltip-number">${$.mayor}%</span><p/>
            <p class="tooltip-under">Menores de 18: <span class="tooltip-number">${$.menor}%</span><p/>
            `).style("left",i/2-150+"px").style("top",100+"px")}).on("mouseout",function(E){m.transition().duration(200).style("opacity",0)}).transition().duration(600).ease(Y.easeQuad).attr("cx",E=>u.count.x(E.mayor)).attr("cy",E=>u.count.y(E.menor)).attr("r",6),f(A)}function p(){Y.select(`#clear-filter-${e}`).on("click",function(){Y.select(`#percentage-over-city-${e} option`).property("selected","0"),Y.select(`#percentage-under-city-${e} option`).property("selected","0"),Y.selectAll(".tooltip-percentage").remove().exit(),Y.csv(t).then(k=>{a=k,a.forEach(M=>{M.mayor=+M.mayor,M.menor=+M.menor,M.city=M.name}),g(a)})})}p();function v(){Y.csv(t).then(T=>{const k=T.map(({name:D})=>D),M=Y.select(`#filter-city-${e}`);M.selectAll("option").data(k).enter().append("option").attr("value",D=>D).text(D=>D),M.on("change",function(){Y.select(`#percentage-over-city-${e} option`).property("selected","0"),Y.select(`#percentage-under-city-${e} option`).property("selected","0"),Y.selectAll(".tooltip-percentage").remove().exit(),y()})})}function x(){Y.select(`#percentage-over-city-${e}`).on("change",function(){Y.select(`#percentage-under-city-${e} option`).property("selected","0");const k=Y.select(this).property("value");Y.csv(t).then(M=>{Y.selectAll(`.scatter-${e}-circles`).transition().duration(400).attr("r",0),a=M.filter(({mayor:D})=>D>k),l.select(`.scatter-${e}-container-bis`),Y.selectAll(".tooltip-percentage").remove().exit(),l.append("div").attr("class","tooltip tooltip-percentage").html(`
            <p class="tooltip-population-text"><span class="tooltip-number">En ${a.length}</span> municipios el % de habitantes mayores de 65 a\xF1os es superior al <span class="tooltip-number">${k}%</span>. <p/>
            `).style("right",`${o.right}px`).style("top",`${50}px`),a.forEach(D=>{D.city=D.name}),g(a)})})}function w(){Y.select(`#percentage-under-city-${e}`).on("change",function(){Y.select(`#percentage-over-city-${e} option`).property("selected","0");const k=Y.select(this).property("value");Y.csv(t).then(M=>{Y.selectAll(`.scatter-${e}-circles`).transition().duration(400).attr("r",0),a=M.filter(({menor:D})=>D>k),l.select(`.scatter-${e}-container-bis`),Y.selectAll(".tooltip-percentage").remove().exit(),l.append("div").attr("class","tooltip tooltip-percentage").html(`
            <p class="tooltip-population-text"><span class="tooltip-number">En ${a.length}</span> municipios el % de habitantes menores de 18 a\xF1os es superior al <span class="tooltip-number">${k}%</span>. <p/>
            `).style("right",`${o.right}px`).style("top",`${50}px`),a.forEach(D=>{D.city=D.name}),g(a)})})}function y(){Y.csv(t).then(T=>{const k=Y.select(`#filter-city-${e}`).property("value");Y.selectAll(`.scatter-${e}-circles`).transition().duration(400).attr("r",0),a=T.reduce((M,{name:D,mayor:N,menor:A,population:F})=>D===k?M.concat({mayor:+N,menor:+A,population:F,city:D}):M,[]),g(a)})}function b(){g(a)}function S(){Y.csv(t).then(T=>{a=T.map(k=>({mayor:+k.mayor,menor:+k.menor,population:+k.population,city:k.name,over:k.percentagemayor,under:k.percentagemenor})),C(),_(),g(a),v(),x(),w()})}window.addEventListener("resize",b),S()}var vt="$";function Ge(){}Ge.prototype=on.prototype={constructor:Ge,has:function(t){return vt+t in this},get:function(t){return this[vt+t]},set:function(t,e){return this[vt+t]=e,this},remove:function(t){var e=vt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===vt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===vt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===vt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===vt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===vt&&++t;return t},empty:function(){for(var t in this)if(t[0]===vt)return!1;return!0},each:function(t){for(var e in this)e[0]===vt&&t(this[e],e.slice(1),this)}};function on(t,e){var n=new Ge;if(t instanceof Ge)t.each(function(o,l){n.set(l,o)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Lh(){var t=[],e=[],n,r,i;function s(o,l,h,u){if(l>=t.length)return n!=null&&o.sort(n),r!=null?r(o):o;for(var d=-1,m=o.length,_=t[l++],C,c,f=on(),g,p=h();++d<m;)(g=f.get(C=_(c=o[d])+""))?g.push(c):f.set(C,[c]);return f.each(function(v,x){u(p,x,s(v,l,h,u))}),p}function a(o,l){if(++l>t.length)return o;var h,u=e[l-1];return r!=null&&l>=t.length?h=o.entries():(h=[],o.each(function(d,m){h.push({key:m,values:a(d,l)})})),u!=null?h.sort(function(d,m){return u(d.key,m.key)}):h}return i={object:function(o){return s(o,0,Ah,Dh)},map:function(o){return s(o,0,yi,xi)},entries:function(o){return a(s(o,0,yi,xi),0)},key:function(o){return t.push(o),i},sortKeys:function(o){return e[t.length-1]=o,i},sortValues:function(o){return n=o,i},rollup:function(o){return r=o,i}}}function Ah(){return{}}function Dh(t,e,n){t[e]=n}function yi(){return on()}function xi(t,e,n){t.set(e,n)}function wi(){}var qt=on.prototype;wi.prototype={constructor:wi,has:qt.has,add:function(t){return t+="",this[vt+t]=t,this},remove:qt.remove,clear:qt.clear,values:qt.keys,size:qt.size,empty:qt.empty,each:qt.each};const gt={select:Dt,selectAll:$t,nest:Lh,min:Et,max:Ot,scaleLinear:St,scaleBand:us,axisBottom:Pt,axisLeft:Nt,csv:Ft,format:_t};function $h(t,e){const n={top:24,right:8,bottom:24,left:40};let r=0,i=0,s=0,a=0;const o=gt.select(`.bar-negative-${e}`),l=o.select("svg"),h={};let u;const d=o.append("div").attr("class","tooltip tooltip-negative").style("opacity",0);function m(){gt.min(u,b=>b.saldo);const v=gt.max(u,b=>b.saldo),x=300,w=gt.scaleBand().domain(u.map(b=>b.year)),y=gt.scaleLinear().domain([gt.min(u,b=>b.saldo*2),gt.max(u,b=>v<x?gt.max(u,S=>S.saldo*6):gt.max(u,S=>S.saldo*2.5))]);h.count={x:w,y}}function _(){const v=l.select(`.bar-negative-${e}-container`);v.append("g").attr("class","axis axis-x"),v.append("g").attr("class","axis axis-y"),v.append("g").attr("class",`bar-negative-${e}-container-bis`)}function C(v,x){const{count:{x:w,y}}=h;w.rangeRound([0,v]).paddingInner(.2),y.range([x,0])}function c(v){const x=gt.axisBottom(h.count.x).tickValues(h.count.x.domain().filter((y,b)=>!(b%6)));v.select(".axis-x").attr("transform",`translate(0,${i})`).call(x);const w=gt.axisLeft(h.count.y).tickFormat(gt.format("d")).ticks(5).tickSize(-r).tickPadding(8);v.select(".axis-y").call(w)}function f(v){s=o.node().offsetWidth,a=600;const{left:x,right:w,top:y,bottom:b}=n;r=s-x-w,i=a-y-b,l.attr("width",s).attr("height",a);const S=l.select(`.bar-negative-${e}-container`);S.attr("transform",`translate(${x},${y})`),C(r,i),o.select(`.bar-negative-${e}-container-bis`).selectAll(".bar-vertical").data(v).join("rect").attr("class",k=>k.saldo<0?"negative bar-vertical":"positive bar-vertical").on("mouseover",function(k,M){d.transition(),d.style("opacity",1).html(`
            <p class="tooltip-year"><span class="tooltip-number">${M.year}</span><p/>
            <p class="tooltip-born">Nacidos: <span class="tooltip-number">${M.nacidos}</span><p/>
            <p class="tooltip-deceased">Fallecidos: <span class="tooltip-number">${M.fallecidos}</span><p/>
            <p class="tooltip-deceased">Saldo: <span class="tooltip-number">${M.saldo}</span><p/>
            `).style("left",s/2-100+"px").style("top",50+"px")}).on("mouseout",function(k){d.transition().duration(200).style("opacity",0)}).attr("width",h.count.x.bandwidth()).attr("x",k=>h.count.x(k.year)).attr("y",k=>k.saldo>0?h.count.y(k.saldo):h.count.y(0)).attr("height",k=>Math.abs(h.count.y(k.saldo)-h.count.y(0))),c(S)}function g(){f(u)}function p(){gt.csv(t).then(v=>{u=v,_(),m(),f(u)})}window.addEventListener("resize",g),p()}const ft={select:Dt,selectAll:$t,min:Et,max:Ot,line:Ae,scaleTime:fe,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,format:_t,formatDefaultLocale:bs};function Oh(t,e){const n={top:8,right:8,bottom:24,left:8};let r=0,i=0;const s=ft.select(`.line-${e}`),a=s.select("svg"),o={};let l;const h="hab",d=ft.select(`.line-province-${e}`).append("div").attr("class","tooltip tooltip-population").style("opacity",0),m=ft.formatDefaultLocale({decimal:",",thousands:".",grouping:[3]});function _(){const x=ft.scaleTime().domain([ft.min(l,y=>y.year),ft.max(l,y=>y.year)]),w=ft.scaleLinear().domain([ft.min(l,y=>y.total/1.25),ft.max(l,y=>y.total*1.25)]);o.count={x,y:w}}function C(){const x=a.select(`.line-${e}-container`);x.append("g").attr("class","axis axis-x"),x.append("g").attr("class","axis axis-y"),x.append("g").attr("class",`line-${e}-container-bis`)}function c(x,w){const{count:{x:y,y:b}}=o;y.range([90,x]),b.range([w,0])}function f(x){const w=ft.axisBottom(o.count.x).tickFormat(ft.format("d")).ticks(9);x.select(".axis-x").attr("transform",`translate(0,${i})`).call(w);const y=m.format(",.0f"),b=ft.axisLeft(o.count.y).tickFormat(S=>`${y(S)} ${h}`).ticks(6).tickSizeInner(-r);x.select(".axis-y").call(b),x.selectAll(".axis-y .tick text").attr("x",80).attr("dy",-5)}function g(x){const w=s.node().offsetWidth,y=550,{left:b,right:S,top:T,bottom:k}=n;r=w-b-S,i=y-T-k,a.attr("width",w).attr("height",y);const M=a.select(`.line-${e}-container`);M.attr("transform",`translate(${b},${T})`);const D=ft.line().x(A=>o.count.x(A.year)).y(A=>o.count.y(A.total));c(r,i);const N=s.select(`.line-${e}-container-bis`);N.selectAll(".line").data([x]).join("path").attr("class","line").attr("stroke-width","1.5").attr("d",D),N.selectAll(".circles").data(x).join("circle").attr("class","circles").attr("fill","#531f4e").on("mouseover",(A,F)=>{const{pageX:E,pageY:$}=A,V=o.count.x(F.year)+270,I=210,j=`${E}px`,dt=`${E-I}px`;d.transition(),d.style("opacity",1).html(`<p class="tooltip-deceased">La poblaci\xF3n en <span class="tooltip-number">${F.year}</span> era de <span class="tooltip-number">${F.total}</span> habitantes<p/>`).style("left",V>w?dt:j).style("top",`${$-48}px`)}).on("mouseout",()=>{d.transition().duration(200).style("opacity",0)}).attr("cx",A=>o.count.x(A.year)).attr("cy",A=>o.count.y(A.total)).attr("r",3),f(M)}function p(){g(l)}function v(){ft.csv(t).then(x=>{l=x,C(),_(),g(l)})}window.addEventListener("resize",p),v()}function Eh(t,e){const n=[],r=[];function i(s,a){if(s.length===1)n.push(s[0]),r.push(s[0]);else{const o=Array(s.length-1);for(let l=0;l<o.length;l++)l===0&&n.push(s[0]),l===o.length-1&&r.push(s[l+1]),o[l]=[(1-a)*s[l][0]+a*s[l+1][0],(1-a)*s[l][1]+a*s[l+1][1]];i(o,a)}}return t.length&&i(t,e),{left:n,right:r.reverse()}}function Ph(t){const e={};return t.length===4&&(e.x2=t[2][0],e.y2=t[2][1]),t.length>=3&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],t.length===4?e.type="C":t.length===3?e.type="Q":e.type="L",e}function Nh(t,e){e=e||2;const n=[];let r=t;const i=1/e;for(let s=0;s<e-1;s++){const a=i/(1-i*s),o=Eh(r,a);n.push(o.left),r=o.right}return n.push(r),n}function Fh(t,e,n){const r=[[t.x,t.y]];return e.x1!=null&&r.push([e.x1,e.y1]),e.x2!=null&&r.push([e.x2,e.y2]),r.push([e.x,e.y]),Nh(r,n).map(Ph)}const Uh=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,se={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(se).forEach(t=>{se[t.toLowerCase()]=se[t]});function Zn(t,e){const n=Array(t);for(let r=0;r<t;r++)n[r]=e;return n}function zh(t){return`${t.type}${se[t.type].map(e=>t[e]).join(",")}`}function Ih(t,e){const n={x1:"x",y1:"y",x2:"x",y2:"y"},r=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==e.type&&e.type.toUpperCase()!=="M"){const i={};Object.keys(e).forEach(s=>{const a=e[s];let o=t[s];o===void 0&&(r.includes(s)?o=a:(o===void 0&&n[s]&&(o=t[n[s]]),o===void 0&&(o=0))),i[s]=o}),i.type=e.type,t=i}return t}function Yh(t,e,n){let r=[];if(e.type==="L"||e.type==="Q"||e.type==="C")r=r.concat(Fh(t,e,n));else{const i=Object.assign({},t);i.type==="M"&&(i.type="L"),r=r.concat(Zn(n-1).map(()=>i)),r.push(e)}return r}function bi(t,e,n){const r=t.length-1,i=e.length-1,s=r/i,o=Zn(i).reduce((l,h,u)=>{let d=Math.floor(s*u);if(n&&d<t.length-1&&n(t[d],t[d+1])){const m=s*u%1<.5;l[d]&&(m?d>0?d-=1:d<t.length-1&&(d+=1):d<t.length-1?d+=1:d>0&&(d-=1))}return l[d]=(l[d]||0)+1,l},[]).reduce((l,h,u)=>{if(u===t.length-1){const d=Zn(h,Object.assign({},t[t.length-1]));return d[0].type==="M"&&d.forEach(m=>{m.type="L"}),l.concat(d)}return l.concat(Yh(t[u],t[u+1],h))},[]);return o.unshift(t[0]),o}function Ci(t){const e=(t||"").match(Uh)||[],n=[];let r,i;for(let s=0;s<e.length;++s)if(r=se[e[s]],r){i={type:e[s]};for(let a=0;a<r.length;++a)i[r[a]]=+e[s+a+1];s+=r.length,n.push(i)}return n}function Vh(t,e,n){let r=t==null?[]:t.slice(),i=e==null?[]:e.slice();if(!r.length&&!i.length)return function(){return[]};const s=(r.length===0||r[r.length-1].type==="Z")&&(i.length===0||i[i.length-1].type==="Z");r.length>0&&r[r.length-1].type==="Z"&&r.pop(),i.length>0&&i[i.length-1].type==="Z"&&i.pop(),r.length?i.length||i.push(r[0]):r.push(i[0]),Math.abs(i.length-r.length)!==0&&(i.length>r.length?r=bi(r,i,n):i.length<r.length&&(i=bi(i,r,n))),r=r.map((l,h)=>Ih(l,i[h]));const o=r.map(l=>({...l}));return s&&o.push({type:"Z"}),function(h){if(h===1)return e==null?[]:e;if(h>0)for(let u=0;u<o.length;++u){const d=r[u],m=i[u],_=o[u];for(const C of se[_.type])_[C]=(1-h)*d[C]+h*m[C],(C==="largeArcFlag"||C==="sweepFlag")&&(_[C]=Math.round(_[C]))}return o}}function ln(t,e,n){let r=Ci(t),i=Ci(e);if(!r.length&&!i.length)return function(){return""};const s=Vh(r,i,n);return function(o){if(o===1)return e==null?"":e;const l=s(o);let h="";for(const u of l)h+=zh(u);return h}}const K={select:Dt,selectAll:$t,min:Et,max:Ot,line:Ae,scaleTime:fe,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,easeLinear:$e,format:_t,interpolatePath:ln};function Hh(t,e){const n={top:16,right:8,bottom:24,left:62};n.left=Ea>544?62:32;let r=0,i=0;const s=K.select(`.line-population-${e}`),a=s.select("svg");let o={},l;const h=K.select(`.${e}-line`),u=s.append("div").attr("class","tooltip tooltip-over"),d=h.append("div").attr("class","tooltip tooltip-population").style("opacity",0);function m(){const y=K.scaleTime().domain([K.min(l,S=>S.year),K.max(l,S=>S.year)]),b=K.scaleLinear().domain([0,K.max(l,S=>S.population)*1.25]);o.count={x:y,y:b}}function _(y){const b=y[0].population,S=y.slice(-1)[0].population;s.node().offsetWidth;const T=b-S,k=S-b;let M=(T*100/b).toFixed(2),D=(k*100/b).toFixed(2);const N=b>S?`<p class="tooltip-deceased">Desde 1900 su poblaci\xF3n ha disminuido en un <span class="tooltip-number">${M}%</span><p/>`:`<p class="tooltip-deceased">Desde 1900 su poblaci\xF3n ha aumentado en un <span class="tooltip-number">${D}%</span><p/>`,A=b>S?"20px":"73%";u.data(l).html(F=>`
        ${N}
        <p class="tooltip-deceased">Mayores de 65 a\xF1os en 2020: <span class="tooltip-number">${F.mayor}%</span><p/>
        <p class="tooltip-deceased">Menores de 18 a\xF1os en 2020: <span class="tooltip-number">${F.menor}%</span><p/>
        `).transition().duration(300).style("top",`${A}`)}function C(){const y=a.select(`.line-population-${e}-container`);y.append("g").attr("class","axis axis-x"),y.append("g").attr("class","axis axis-y"),y.append("g").attr("class",`line-population-${e}-container-bis`)}function c(y,b){const{count:{x:S,y:T}}=o;S.range([0,y-n.right]),T.range([b,0])}function f(y){const b=K.axisBottom(o.count.x).tickPadding(4).tickFormat(K.format("d")).ticks(13);y.select(".axis-x").attr("transform",`translate(0,${i})`).call(b);const S=K.axisLeft(o.count.y).tickPadding(5).tickFormat(K.format("d")).tickSize(-r).ticks(6);y.select(".axis-y").transition().duration(450).ease(K.easeLinear).call(S)}function g(y){const b=s.node().offsetWidth,S=500,{left:T,right:k,top:M,bottom:D}=n;r=b-T-k,i=S-M-D,a.attr("width",b).attr("height",S);const N=a.select(`.line-population-${e}-container`);N.attr("transform",`translate(${T},${M})`);const A=K.line().x(E=>o.count.x(E.year)).y(E=>o.count.y(E.population));c(r,i);const F=s.select(`.line-population-${e}-container-bis`);F.selectAll(".lines").data([l]).join("path").attr("class","lines").transition().duration(300).ease(K.easeLinear).attrTween("d",function(E){let $=K.select(this).attr("d"),V=A(E);return K.interpolatePath($,V)}),F.selectAll(".circles-population").data(l).join(E=>E.append("circle").attr("cx",$=>o.count.x($.year)).attr("cy",$=>o.count.y($.population)).attr("r",0),E=>E.attr("r",3),E=>E.attr("cx",$=>o.count.x($.year)).attr("cy",$=>o.count.y($.population)).attr("r",0)).attr("class","circles-population").attr("fill","#531f4e").on("mouseover",(E,$)=>{const{year:V,population:I}=$,{pageX:j,pageY:dt}=E,ct=o.count.x(V)+270,at=210,H=`${j}px`,Z=`${j-at}px`;d.transition(),d.style("opacity",1).html(`<p class="tooltip-deceased">La poblaci\xF3n en <span class="tooltip-number">${V}</span> era de <span class="tooltip-number">${I}</span> habitantes<p/>`).style("left",ct>b?Z:H).style("top",`${dt-48}px`)}).on("mouseout",()=>{d.transition().duration(200).style("opacity",0)}).transition().duration(400).ease(K.easeLinear).attr("cx",E=>o.count.x(E.year)).attr("cy",E=>o.count.y(E.population)).attr("r",3),f(N)}function p(){K.csv(t).then(y=>{const b=K.select(`#select-city-${e}`).property("value");l=y.filter(({name:S})=>S===b),l.forEach(S=>{S.population=+S.population,S.year=+S.year}),m(),g(),_(l)})}function v(){K.csv(t).then(y=>{const b=[...new Set(y.map(({name:T})=>T))],S=K.select(`#select-city-${e}`);S.selectAll("option").data(b).enter().append("option").attr("value",T=>T).text(T=>T),S.on("change",function(){p()})})}function x(){g()}function w(){K.csv(t).then(y=>{l=y.map(b=>({year:+b.year,population:+b.population})),C(),m(),p()}),v()}window.addEventListener("resize",x),w()}const wt={select:Dt,selectAll:$t,min:Et,max:Ot,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,format:_t};function Bh(){const t={top:24,right:24,bottom:48,left:72};let e=0,n=0,r=0,i=0;const s=wt.select(".scatter-desert"),a=s.select("svg"),o={},l=" hab/km2";let h;function u(){const g=wt.scaleLinear().domain([wt.min(h,v=>v.densidad),wt.max(h,v=>v.densidad)]),p=wt.scaleLinear().domain([wt.min(h,v=>v.densidad),wt.max(h,v=>v.densidad)]);o.count={x:g,y:p}}function d(){const g=a.select(".scatter-desert-container");g.append("g").attr("class","axis axis-x"),g.append("g").attr("class","axis axis-y"),g.append("g").attr("class","scatter-desert-container-bis"),g.append("circle").attr("r",3).attr("fill","#B41248").attr("cy","94%").attr("cx","4%"),g.append("text").text("Municipios con una densidad inferior a 10hab/km2").attr("y","95%").attr("x","5%")}function m(g,p){const{count:{x:v,y:x}}=o;v.range([0,g]),x.range([p,0])}function _(g){const{count:{x:p,y:v}}=o,x=wt.axisBottom(p).tickFormat(wt.format("d")).ticks(0);g.select(".axis-x").attr("transform",`translate(0,${n})`).call(x);const w=wt.axisLeft(v).tickFormat(y=>y+l).tickSize(-e).ticks(10);g.select(".axis-y").call(w)}function C(g){r=s.node().offsetWidth,i=600;const{left:p,right:v,top:x,bottom:w}=t;e=r-p-v,n=i-x-w,a.attr("width",r).attr("height",i);const y=a.select(".scatter-desert-container");y.attr("transform",`translate(${p},${x})`),m(e,n),s.select(".scatter-desert-container-bis").selectAll(".circle-desert").data(g).join("circle").attr("class","circle-desert").attr("cx",S=>Math.random()*e).attr("cy",S=>o.count.y(S.densidad)).attr("r",3).attr("fill",S=>S.densidad>=10?"#3b2462":"#B41248").attr("fill-opacity",.8),_(y)}function c(){C(h)}function f(){wt.csv("data/aragon-municipios.csv").then(g=>{h=g,d(),u(),C(h)})}window.addEventListener("resize",c),f()}const tt={select:Dt,selectAll:$t,min:Et,max:Ot,line:Ae,scaleTime:fe,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,easeLinear:$e,format:_t,interpolatePath:ln};function Rh(t,e){const n={top:16,right:16,bottom:24,left:62};let r=0,i=0;const s=tt.select(`.line-lb-${e}`),a=s.select("svg");let o={},l;function h(){const p=tt.scaleTime().domain([2010,2020]),v=tt.scaleLinear().domain([tt.min(l,x=>x.population*1.75-x.population),tt.max(l,x=>x.population)*1.25]);o.count={x:p,y:v}}function u(){const p=a.select(`.line-lb-${e}-container`);p.append("g").attr("class","axis axis-x"),p.append("g").attr("class","axis axis-y"),p.append("g").attr("class",`line-lb-${e}-container-bis`)}function d(p,v){const{count:{x,y:w}}=o;x.range([0,p]),w.range([v,0])}function m(p){const v=tt.axisBottom(o.count.x).tickPadding(5).tickFormat(tt.format("d")).ticks(13);p.select(".axis-x").attr("transform",`translate(0,${i})`).call(v);const x=tt.axisLeft(o.count.y).tickPadding(5).tickFormat(tt.format("d")).tickSize(-r).ticks(6);p.select(".axis-y").transition().duration(450).ease(tt.easeLinear).call(x)}function _(p){const v=s.node().offsetWidth,x=500,{left:w,right:y,top:b,bottom:S}=n;r=v-w-y,i=x-b-S,a.attr("width",v).attr("height",x);const T=a.select(`.line-lb-${e}-container`);T.attr("transform",`translate(${w},${b})`);const k=tt.line().x(D=>o.count.x(D.year)).y(D=>o.count.y(D.population));d(r,i),s.select(`.line-lb-${e}-container-bis`).selectAll(".lines").data([l]).join("path").attr("class","lines").transition().duration(300).ease(tt.easeLinear).attrTween("d",function(D){let N=tt.select(this).attr("d"),A=k(D);return tt.interpolatePath(N,A)}),m(T)}function C(){tt.csv(t).then(p=>{const v=tt.select(`#select-lb-${e}`).property("value");l=p.filter(({municipio:x})=>x===v),l.forEach(x=>{x.population=+x.population,x.year=+x.year}),h(),_()})}function c(){_()}function f(){tt.csv(t).then(p=>{const v=[...new Set(p.map(({municipio:w})=>w))],x=tt.select(`#select-lb-${e}`);x.selectAll("option").data(v).enter().append("option").attr("value",w=>w).text(w=>w),x.on("change",function(){C()})})}function g(){tt.csv(t).then(p=>{const[{name:v}]=p;l=p.reduce((x,w)=>(w.municipio===v&&(w.year=+w.year,w.population=+w.population,x.push(w)),x),[]),u(),h(),_(),C()})}window.addEventListener("resize",c),g(),f()}const et={select:Dt,selectAll:$t,min:Et,max:Ot,line:Ae,scaleTime:fe,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,easeLinear:$e,format:_t,interpolatePath:ln};function Wh(t,e){let n=0,r=0,i={},s;const a={top:16,right:16,bottom:24,left:96},o=et.select(`.line-densidad-${e}`),l=o.select("svg"),h=" hab/km2";function u(){const x=et.scaleTime().domain([et.min(s,y=>y.year),et.max(s,y=>y.year)]),w=et.scaleLinear().domain([0,et.max(s,y=>y.densidad*1.5)]);i.count={x,y:w}}function d(){const x=l.select(`.line-densidad-${e}-container`);x.append("g").attr("class","axis axis-x"),x.append("g").attr("class","axis axis-y"),x.append("g").attr("class",`line-densidad-${e}-container-bis`)}function m(x,w){const{count:{x:y,y:b}}=i;y.range([0,x]),b.range([w,0])}function _(x){const w=et.axisBottom(i.count.x).tickPadding(5).tickFormat(et.format("d")).ticks(13);x.select(".axis-x").attr("transform",`translate(0,${r})`).call(w);const y=et.axisLeft(i.count.y).tickPadding(5).tickFormat(b=>b+h).tickSize(-n).ticks(6);x.select(".axis-y").transition().duration(450).ease(et.easeLinear).call(y)}function C(x){const w=o.node().offsetWidth,y=500,{left:b,right:S,top:T,bottom:k}=a;n=w-b-S,r=y-T-k,l.attr("width",w).attr("height",y);const M=l.select(`.line-densidad-${e}-container`);M.attr("transform",`translate(${b},${T})`);const D=et.line().x(A=>i.count.x(A.year)).y(A=>i.count.y(A.densidad));m(n,r),o.select(`.line-densidad-${e}-container-bis`).selectAll(".lines").data([s]).join("path").attr("class","lines").transition().duration(300).ease(et.easeLinear).attrTween("d",function(A){let F=et.select(this).attr("d"),E=D(A);return et.interpolatePath(F,E)}),_(M)}function c(){et.csv(t).then(x=>{const w=et.select(`#select-densidad-${e}`).property("value");s=x.filter(({name:y})=>y===w),s.forEach(y=>{y.population=+y.population,y.year=+y.year,y.superficie=+y.superficie,y.densidad=y.population/y.superficie}),u(),C(),v(s)})}function f(){C()}function g(){et.csv(t).then(x=>{const w=[...new Set(x.map(({name:b})=>b))],y=et.select(`#select-densidad-${e}`);y.selectAll("option").data(w).enter().append("option").attr("value",b=>b).text(b=>b),y.on("change",function(){c()})})}function p(){et.csv(t).then(x=>{const[{name:w}]=x;s=x.reduce((y,b)=>(b.name===w&&(b.year=+b.year,b.population=+b.population,b.superficie=+b.superficie,b.densidad=+(b.population/b.superficie),y.push(b)),y),[]),d(),u(),C(),c(),v(s)})}function v(x){const w=x.map(({densidad:y})=>y);w.some(y=>y<10)&&w[w.length-1]<10?(o.selectAll(".rect-desert-demographic").remove().exit(),o.append("div").attr("class","rect-desert-demographic").html("<span>Una densidad inferior a 10hab/km convierte al municipio en un desierto dem\xF3grafico.</span>").style("position","absolute").style("top","50px").style("left","70%")):o.selectAll(".rect-desert-demographic").remove().exit()}window.addEventListener("resize",f),p(),g()}const G={select:Dt,selectAll:$t,min:Et,max:Ot,scaleLinear:St,axisBottom:Pt,axisLeft:Nt,csv:Ft,format:_t,easeLinear:$e},qh=(t,e)=>{const n={top:24,right:24,bottom:48,left:72};let r=0,i=0,s=0,a=0,o,l=2020,h=2010,u,d,m;const _=G.select(`.scatter-lb-${e}`),C=_.select("svg"),c={},f="%",g=G.select(`.scatter-lb-${e}`).append("div").attr("class","tooltip tooltip-scatter-lb").style("opacity",0);function p(){const A=G.scaleLinear().domain([G.min(m,E=>E.percentage),G.max(m,E=>E.percentage)]),F=G.scaleLinear().domain([G.min(m,E=>E.percentage*1.25),G.max(m,E=>E.percentage)]);c.count={x:A,y:F}}function v(){const A=C.select(`.scatter-lb-${e}-container`);A.append("g").attr("class","axis axis-x"),A.append("g").attr("class","axis axis-y"),A.append("g").attr("class",`scatter-lb-${e}-container-bis`),A.append("circle").attr("r",3).attr("fill","#B41248").attr("cy","94%").attr("cx","4%"),A.append("circle").attr("r",3).attr("fill","#3b2462").attr("cy","90%").attr("cx","4%")}function x(A,F){const{count:{x:E,y:$}}=c;E.range([0,A]),$.range([F,0])}function w(A){const F=G.axisBottom(c.count.x).tickFormat(G.format("d")).ticks(0);A.select(".axis-x").attr("transform",`translate(0,${i})`).call(F);const E=G.axisLeft(c.count.y).tickFormat($=>$+f).tickSize(-r).ticks(10);A.select(".axis-y").transition().duration(450).ease(G.easeLinear).call(E)}function y(A){s=_.node().offsetWidth,a=600;const{left:F,right:E,top:$,bottom:V}=n;r=s-F-E,i=a-$-V,C.attr("width",s).attr("height",a);const I=`translate(${F},${$})`,j=C.select(`.scatter-lb-${e}-container`);j.attr("transform",I),x(r,i);const ct=_.select(`.scatter-lb-${e}-container-bis`).selectAll(".circle-desert").remove().exit().data(A),at=ct.enter().append("circle").attr("class","circle-desert");ct.merge(at).attr("cx",H=>Math.random()*r).attr("cy",H=>c.count.y(H.percentage/2)).attr("r",2).on("mouseover",(H,Z)=>{const{pageX:xt,pageY:q}=H,pt=c.count.x(Z.cp)+270,O=210,U=`${xt}px`,z=`${xt-O}px`;g.transition();const L=Z.percentage>0?`<p class="tooltip-scatter-text"><strong>${Z.name}</strong> aumento su poblaci\xF3n en un <strong>${Z.percentage}%</strong>.<p/>`:Z.percentage===0?`<p class="tooltip-scatter-text"><strong>${Z.name}</strong> ni aumentado ni disminuyo su poblaci\xF3n.<p/>`:`<p class="tooltip-scatter-text"><strong>${Z.name}</strong> disminuyo su poblaci\xF3n en un <strong>${Z.percentage}%</strong>.<p/>`;g.style("opacity",1).html(`${L}
            <p class="tooltip-scatter-text">Poblaci\xF3n en ${h}: <strong>${Z.populationFirstYear}</strong><p/>
            <p class="tooltip-scatter-text">Poblaci\xF3n en ${l}: <strong>${Z.populationSecondYear}</strong><p/>`).style("left",pt>s?z:U).style("top",`${q-100}px`)}).on("mouseout",()=>{g.transition().duration(200).style("opacity",0)}).attr("fill-opacity",.8).transition().duration(450).ease(G.easeLinear).attr("cy",H=>c.count.y(H.percentage)).attr("fill",H=>H.percentage>=0?"#3b2462":H.percentage===0?"#111":"#B41248").attr("r",3),w(j)}function b(){y(m)}const S=["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020"];function T(A){const F=G.select(`#select-first-year-${e}`);G.select(`#select-second-year-${e}`).property("value"),F.selectAll("option").remove().exit().data(A).enter().append("option").text(E=>E)}function k(A){G.select(`#select-second-year-${e}`).selectAll("option").remove().exit().data(A).enter().append("option").text(E=>E)}function M(){G.csv(t).then(A=>{o=A.map(F=>({year:+F.year,population:+F.population,municipio:F.municipio})),v(),T(S),k(S),G.select(`#select-second-year-${e}`).property("value",l),D()})}function D(){let A=[];h=G.select(`#select-first-year-${e}`).property("value"),l=G.select(`#select-second-year-${e}`).property("value");let F=N(+h,"populationFirstYear"),E=N(+l,"populationSecondYear");A=F.map(($,V)=>Object.assign({},$,E[V])),m=A.map(({populationFirstYear:$,populationSecondYear:V,name:I,cp:j})=>({percentage:+((V-$)*100/$).toFixed(2),populationFirstYear:$,populationSecondYear:V,cp:j,name:I})),u=m.filter(({percentage:$})=>$<0).length,d=m.filter(({percentage:$})=>$>0).length,G.select(`.municipios-lost-${e}`).remove(),G.select(`.municipios-wins-${e}`).remove(),C.select(`.scatter-lb-${e}-container`).append("text").attr("class",`municipios-lost-${e}`).attr("y","95%").attr("x","5%").text(`${u} municipios han perdido poblaci\xF3n.`),C.select(`.scatter-lb-${e}-container`).append("text").attr("class",`municipios-wins-${e}`).attr("y","91%").attr("x","5%").text(`${d} municipios han ganado poblaci\xF3n.`),p(),y(m)}function N(A,F){return o.filter(({year:$})=>$===A).map(({population:$,municipio:V,cp:I})=>({[F]:$,name:V,cp:I}))}G.select(`#select-compare-${e}`).on("click",A=>{D()}),window.addEventListener("resize",b),M()},X={select:Dt,selectAll:$t,min:Et,max:Ot,bisector:Le,extent:cr,area:as,stack:ls,easeLinear:$e,stackOrderInsideOut:cs,scaleTime:fe,scaleLinear:St,scaleOrdinal:nn,axisBottom:Pt,axisLeft:Nt,csv:Ft,format:_t,group:wl,rollup:bl,sum:Sl,interpolatePath:ln};function Xh(t,e){const n={top:40,right:8,bottom:24,left:32};let r=0,i=0,s,a;const o=X.select(`.municipalities-stack-${e}`),l=o.select("svg"),h={},u=X.bisector(y=>y.year).left,d=o.append("div").attr("class","tooltip tooltip-stack").style("opacity",0);function m(y){const b=X.scaleTime().domain(X.extent(s,M=>M.year));let S=Array.from(new Set(s.map(M=>M.age)).values());const T=X.stack().keys(S)(y),k=X.scaleLinear().domain([0,X.max(T,M=>X.max(M,D=>D[1]))]);h.count={x:b,y:k}}function _(){const y=l.select(`.municipalities-stack-${e}-container`);y.append("g").attr("class","axis axis-x"),y.append("g").attr("class","axis axis-y"),y.append("g").attr("class",`municipalities-stack-container-${e}-bis`)}function C(y,b){const{count:{x:S,y:T}}=h;S.range([0,y]),T.range([b,0])}function c(y){const{count:{x:b,y:S}}=h,T=X.axisBottom(b).tickFormat(X.format("d")).tickPadding(7).ticks(9);y.select(".axis-x").attr("transform",`translate(0,${i})`).call(T);const k=X.axisLeft(S).tickFormat(M=>M).tickSizeInner(-r).ticks(12);y.select(".axis-y").transition().duration(450).ease(X.easeLinear).call(k)}function f(y){const b=o.node().offsetWidth,S=600,{left:T,right:k,top:M,bottom:D}=n;r=b-T-k,i=S-M-D,l.attr("width",b).attr("height",S);const N=`translate(${T},${M})`,A=l.select(`.municipalities-stack-${e}-container`);A.attr("transform",N),A.append("rect").attr("class","overlay-dos"),A.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0);let F=Array.from(new Set(s.map(q=>q.age)).values());const E=X.stack().keys(F)(y);let $=[...new Set(s.map(({age:q})=>q))];const V=X.area().x(q=>h.count.x(q.data.year)).y0(q=>h.count.y(q[0])).y1(q=>h.count.y(q[1])),I=X.scaleOrdinal().domain($).range(["#9db7c5","#18857f","#1f4196"]),j=l.selectAll(".label").data(I.domain()).enter().append("g").attr("class","label").attr("transform",(q,pt)=>`translate(${pt*54}, 10)`);j.append("rect").attr("x",(q,pt)=>`${n.left+pt*34}`).attr("y",0).attr("width",16).attr("height",16).style("fill",I),j.append("text").attr("class","legend-text").attr("x",(q,pt)=>`${n.left+20+pt*34}`).attr("y",9).attr("dy",".35em").text(q=>`${q} a\xF1os`),C(r,i);const ct=o.select(`.municipalities-stack-container-${e}-bis`).selectAll(".area-stack-municipalities").data(E),at=ct.enter().append("path").attr("class","area-stack-municipalities");ct.merge(at).transition().duration(300).ease(X.easeLinear).attrTween("d",function(q){let pt=X.select(this).attr("d"),O=V(q);return X.interpolatePath(pt,O)}).attr("fill",q=>I(q.key));const H=A.select(".focus"),Z=A.select(".overlay-dos");H.select(".x-hover-line").attr("y2",i),Z.attr("width",r+n.left+n.right).attr("height",i).on("mouseover",function(){H.style("display",null)}).on("mouseout",function(){H.style("display","none"),d.style("opacity",0)}).on("mousemove",xt);function xt(q){const{layerX:pt}=q,O=o.node().offsetWidth;var U=h.count.x.invert(pt),z=u(s,U,1),L=s[z-1],it=s[z],R=U-L.year>it.year-U?it:L;const st=h.count.x(R.year)+n.left,ot=st+200,zt=O-st,he=R.year,js=s.filter(({year:te})=>te===he).reduce((te,cn)=>(te.push(ta(cn)),te),[]);function ta(te){const{age:cn,total:Lr}=te;return`<span class="tooltip-stack-text"><b>${cn} a\xF1os:</b> ${Lr} ${Lr===1?"habitante":"habitantes"}</span>`}d.style("opacity",1).html(()=>`
            <span class="tooltip-stack-year">${he}</span>
            ${js.join("")}
          `).style("top","35%").style("left",ot>O?"auto":st+"px").style("right",ot>O?zt+"px":"auto"),H.select(".x-hover-line").attr("transform",`translate(${h.count.x(R.year)},0)`)}c(A)}function g(){X.csv(t).then(y=>{const b=X.select(`#select-municipalities-stack-${e}`).property("value");s=y.filter(({name:S})=>S===b),a=w(),m(a),f(a)})}function p(){X.csv(t).then(y=>{const b=[...new Set(y.map(({name:T})=>T))],S=X.select(`#select-municipalities-stack-${e}`);S.selectAll("option").data(b).enter().append("option").attr("value",T=>T).text(T=>T),S.on("change",function(){g()})})}function v(){const y=w();f(y)}function x(){X.csv(t).then(y=>{const[{name:b}]=y;s=y.filter(({name:S})=>S===b),a=w(),_(),p(),m(a),f(a)})}function w(){let y=X.group(s,T=>T.year,T=>T.age),b=Array.from(new Set(s.map(T=>T.age)).values());const S=T=>X.sum(T,k=>k.total);return Array.from(y.entries()).map(T=>{const k={};k.year=T[0];for(let M of b){const D=T[1].get(M);k[M]=D?S(Array.from(D.values())):0}return k}).sort((T,k)=>T.year-k.year)}window.addEventListener("resize",v),x()}Oa();setTimeout(Na(),200);Bh();uf();Pa();na.map(t=>{const{city:e,linePopulationCSV:n,lineTotalCSV:r,scatterUnderCSV:i,vegetativeCSV:s,evolutionCSV:a,groupByAgeCSV:o,densityCSV:l}=t;Hh(n,e),Oh(r,e),kh(i,e),$h(s,e),Rh(a,e),qh(a,e),Xh(o,e),Wh(l,e)});
