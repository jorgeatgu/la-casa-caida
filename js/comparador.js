const widthMobile=window.innerWidth>0?window.innerWidth:screen.width;function grid(){let t;const e=d3.select(".grid-chart-element"),a=d3.select(".container-chart");let i,n;widthMobile>544?(gridWidth=12,i=d3_iconarray.layout().width(12).height(8),w=a.node().offsetWidth/3,gridWidth,w):(gridWidth=20,w=a.node().offsetWidth,i=d3_iconarray.layout().width(14).height(8),gridWidth,w);const d=8,o=d,r=d,s=d3.scaleLinear().range([0,w-(r+o)]).domain([0,gridWidth]);function l(a){t=void 0===a?"Ababuj":a,d3.csv("data/teruel/vox-municipios-teruel.csv",(a,o)=>{a?console.log(a):(dataz=o,dataz.forEach(t=>{t.name=t.name,t.population=t.population}),dataz=dataz.filter(e=>e.name===t),dataz[0].population>100&&conffetiTroll(),n=dataz[0].population-100,d3.select(".grid-chart-diferencia").html(t=>`<p class="diferencia-habitantes"><span class="numero-diferencia">${dataz[0].name}</span> tiene <span class="numero-diferencia">${n}</span> habitantes más que la manifestación de Vox. `),function(t){e.selectAll(".temas").remove().exit().data(t).enter().append("div").attr("class","temas").call(function(t,e){i.widthFirst(e),t.append("h3").attr("class","title-m").html(t=>`<p class="habitantes">Número de habitantes en <span class="numero-habitantes">${t.name}</span>: ${t.population}`),t.append("svg").attr("width",w).attr("height",t=>t.population/12*32).append("g").attr("class","container").selectAll("rect").data(t=>i(d3.range(0,t.population,1))).enter().append("rect").attr("x",t=>s(t.position.x)).attr("y",t=>s(t.position.y)).attr("rx",1.5).attr("ry",1.5).attr("width",0).attr("height",0).transition().delay((t,e)=>5*e).duration(250).attr("width",2.5*d).attr("height",2.5*d).attr("fill","#1d7351")},!0)}(dataz))})}t="Arens de Lledó",window.addEventListener("resize",()=>{l(t)}),d3.csv("data/teruel/vox-municipios-teruel.csv",(t,e)=>{if(t)console.log(t);else{datos=e;const t=d3.nest().key(t=>t.name).entries(datos),a=d3.select("#municipios-teruel");a.selectAll("option").data(t).enter().append("option").attr("value",t=>t.key).text(t=>t.key),a.on("change",function(){l(d3.select(this).property("value"))})}}),l(t)}function gridVox(){const t=d3.select(".grid-chart-element-vox"),e=d3.select(".container-chart");let a;widthMobile>544?(gridWidth=12,a=d3_iconarray.layout().width(12).height(8),w=e.node().offsetWidth/3,gridWidth,w):(gridWidth=20,w=e.node().offsetWidth,a=d3_iconarray.layout().width(14).height(8),gridWidth,w);const i=8,n=i,d=i,o=d3.scaleLinear().range([0,w-(d+n)]).domain([0,gridWidth]);function r(e){t.selectAll(".temas").data(e).enter().append("div").attr("class","temas").call(function(t,e){a.widthFirst(e),t.append("h3").attr("class","title-m").html(t=>`<p class="habitantes">Asistentes a la manifestación de <span class="numero-habitantes">${t.name}</span> en Teruel: ${t.population}`),t.append("svg").attr("width",w).attr("height",t=>t.population/12*32).append("g").attr("class","container").selectAll("span").data(t=>a(d3.range(0,t.population,1))).enter().append("rect").attr("x",t=>o(t.position.x)).attr("y",t=>o(t.position.y)).attr("rx",1.5).attr("ry",1.5).attr("width",2.5*i).attr("height",2.5*i).attr("fill","#75BD4C")},!0)}window.addEventListener("resize",()=>{r()}),d3.csv("data/teruel/vox-municipios-teruel.csv",(t,e)=>{t?console.log(t):(dataz=e,dataz.forEach(t=>{t.name=t.name,t.population=t.population}),dataz=dataz.filter(t=>"Vox"===t.name),r(dataz))})}function conffetiTroll(){function t(t,e){return Math.random()*(e-t)+t}confetti({angle:t(55,125),spread:t(50,70),particleCount:t(50,100),origin:{y:.6}})}grid(),gridVox(),new SlimSelect({select:"#municipios-teruel",searchPlaceholder:"Selecciona un municipio"});